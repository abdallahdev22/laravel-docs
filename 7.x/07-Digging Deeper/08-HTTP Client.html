<!DOCTYPE html>
<html class="gr__laravel_com" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>HTTP Client - Laravel - The PHP Framework For Web Artisans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <link rel="canonical" href="https://laravel.com/docs/7.x/http-client">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://laravel.com/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://laravel.com/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://laravel.com/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://laravel.com/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="https://laravel.com/img/favicon/safari-pinned-tab.svg" color="#ff2d20">
    <link rel="shortcut icon" href="https://laravel.com/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ff2d20">
    <meta name="msapplication-config" content="/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Load fonts -->
    <link rel="stylesheet" href="08-HTTP%20Client_files/ins2wgm.css">

    <!-- Load styles -->
    <link rel="stylesheet" type="text/css" href="08-HTTP%20Client_files/app.css">

    <!-- Load JS -->
    <script src="08-HTTP%20Client_files/jquery.js"></script>

    <script id="_carbonads_projs" type="text/javascript" src="08-HTTP%20Client_files/CKYILK3E.json"></script>
</head>
<body class="language-php" data-gr-c-s-loaded="true">

<div class="sidebar_layout" id="docsScreen">

    <div class="page_contain">
        <div class="contain">
            <aside class="sidebar">
                <a href="../index.html" class="logo">
                    <img class="mark" src="../index_files/logomark.min.svg" alt="Laravel">
                    <img class="type" src="../index_files/logotype.min.svg" alt="Laravel">
                </a>
                <nav>
                    <div class="navigation_contain" style="display: block;">
                        <div class="docs_sidebar">
                            <ul>
                                <li>
                                    <h2>Prologue</h2>
                                    <ul>
                                        <li><a href="../01-Prologue/01-Release%20Notes.html">Release Notes</a></li>
                                        <li><a href="../01-Prologue/02-Upgrade%20Guide.html">Upgrade Guide</a></li>
                                        <li><a href="../01-Prologue/03-Contribution%20Guide.html">Contribution Guide</a>
                                        </li>
                                        <li><a href="https://laravel.com/api/7.x">API Documentation</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Getting Started</h2>
                                    <ul>
                                        <li><a href="../02-Getting%20Started/01-Installation.html">Installation</a></li>
                                        <li><a href="../02-Getting%20Started/02-Configuration.html">Configuration</a>
                                        </li>
                                        <li><a href="../02-Getting%20Started/03-Directory%20Structure.html">Directory
                                            Structure</a>
                                        </li>
                                        <li><a href="../02-Getting%20Started/04-Homestead.html">Homestead</a></li>
                                        <li><a href="../02-Getting%20Started/05-Valet.html">Valet</a></li>
                                        <li><a href="../02-Getting%20Started/06-Deployment.html">Deployment</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Architecture Concepts</h2>
                                    <ul>
                                        <li><a href="../03-Architecture%20Concepts/01-Request%20Lifecycle.html">Request
                                            Lifecycle</a></li>
                                        <li><a href="../03-Architecture%20Concepts/02-Service%20Container.html">Service
                                            Container</a></li>
                                        <li><a href="../03-Architecture%20Concepts/03-Service%20Providers.html">Service
                                            Providers</a></li>
                                        <li><a href="../03-Architecture%20Concepts/04-Facades.html">Facades</a></li>
                                        <li><a href="../03-Architecture%20Concepts/05-Contracts.html">Contracts</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>The Basics</h2>
                                    <ul>
                                        <li><a href="../04-The%20Basics/01-Routing.html">Routing</a></li>
                                        <li><a href="../04-The%20Basics/02-Middleware.html">Middleware</a></li>
                                        <li><a href="../04-The%20Basics/03-CSRF%20Protection.html">CSRF Protection</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/04-Controllers.html">Controllers</a></li>
                                        <li><a href="../04-The%20Basics/05-Requests.html">Requests</a></li>
                                        <li><a href="../04-The%20Basics/06-Responses.html">Responses</a></li>
                                        <li><a href="../04-The%20Basics/07-Views.html">Views</a></li>
                                        <li><a href="../04-The%20Basics/08-URL%20Generation.html">URL Generation</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/09-Session.html">Session</a></li>
                                        <li><a href="../04-The%20Basics/10-Validation.html">Validation</a></li>
                                        <li><a href="../04-The%20Basics/11-Error%20Handling.html">Error Handling</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/12-Logging.html">Logging</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Frontend</h2>
                                    <ul>
                                        <li><a href="../05-Frontend/01-Blade%20Templates.html">Blade Templates</a></li>
                                        <li><a href="../05-Frontend/02-Localization.html">Localization</a></li>
                                        <li><a href="../05-Frontend/03-Frontend%20Scaffolding.html">Frontend
                                            Scaffolding</a></li>
                                        <li><a href="../05-Frontend/04-Compiling%20Assets.html">Compiling Assets</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Security</h2>
                                    <ul>
                                        <li><a href="../06-Security/01-Authentication.html">Authentication</a></li>
                                        <li><a href="../06-Security/02-Authorization.html">Authorization</a></li>
                                        <li><a href="../06-Security/03-Email%20Verification.html">Email Verification</a>
                                        </li>
                                        <li><a href="../06-Security/04-Encryption.html">Encryption</a></li>
                                        <li><a href="../06-Security/05-Hashing.html">Hashing</a></li>
                                        <li><a href="../06-Security/06-Password%20Reset.html">Password Reset</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Digging Deeper</h2>
                                    <ul>
                                        <li><a href="../07-Digging%20Deeper/01-Artisan%20Console.html">Artisan
                                            Console</a></li>
                                        <li><a href="../07-Digging%20Deeper/02-Broadcasting.html">Broadcasting</a></li>
                                        <li><a href="../07-Digging%20Deeper/03-Cache.html">Cache</a></li>
                                        <li><a href="../07-Digging%20Deeper/04-Collections.html">Collections</a></li>
                                        <li><a href="../07-Digging%20Deeper/05-Events.html">Events</a></li>
                                        <li><a href="../07-Digging%20Deeper/06-File%20Storage.html">File Storage</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/07-Helpers.html">Helpers</a></li>
                                        <li><a href="../07-Digging%20Deeper/08-HTTP%20Client.html">HTTP Client</a></li>
                                        <li><a href="../07-Digging%20Deeper/09-Mail.html">Mail</a></li>
                                        <li><a href="../07-Digging%20Deeper/10-Notifications.html">Notifications</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/11-Package%20Development.html">Package
                                            Development</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/12-Queues.html">Queues</a></li>
                                        <li><a href="../07-Digging%20Deeper/13-Task%20Scheduling.html">Task
                                            Scheduling</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Database</h2>
                                    <ul>
                                        <li><a href="../08-Database/01-Getting%20Started.html">Getting Started</a></li>
                                        <li><a href="../08-Database/02-Query%20Builder.html">Query Builder</a></li>
                                        <li><a href="../08-Database/03-Pagination.html">Pagination</a></li>
                                        <li><a href="../08-Database/04-Migrations.html">Migrations</a></li>
                                        <li><a href="../08-Database/05-Seeding.html">Seeding</a></li>
                                        <li><a href="../08-Database/06-Redis.html">Redis</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Eloquent ORM</h2>
                                    <ul>
                                        <li><a href="../09-Eloquent%20ORM/01-Getting%20Started.html">Getting Started</a>
                                        </li>
                                        <li><a href="../09-Eloquent%20ORM/02-Relationships.html">Relationships</a></li>
                                        <li><a href="../09-Eloquent%20ORM/03-Collections.html">Collections</a></li>
                                        <li><a href="../09-Eloquent%20ORM/04-Mutators.html">Mutators</a></li>
                                        <li><a href="../09-Eloquent%20ORM/05-API%20Resources.html">API Resources</a>
                                        </li>
                                        <li><a href="../09-Eloquent%20ORM/06-Serialization.html">Serialization</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Testing</h2>
                                    <ul>
                                        <li><a href="../10-Testing/01-Getting%20Started.html">Getting Started</a></li>
                                        <li><a href="../10-Testing/02-HTTP%20Tests.html">HTTP Tests</a></li>
                                        <li><a href="../10-Testing/03-Console%20Tests.html">Console Tests</a></li>
                                        <li><a href="../10-Testing/04-Browser%20Tests.html">Browser Tests</a></li>
                                        <li><a href="../10-Testing/05-Database.html">Database</a></li>
                                        <li><a href="../10-Testing/06-Mocking.html">Mocking</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Official Packages</h2>
                                    <ul>
                                        <li><a href="../11-Official%20Packages/01-Cashier.html">Cashier (Stripe)</a>
                                        </li>
                                        <li><a href="https://github.com/laravel/cashier-mollie">Cashier (Mollie)</a>
                                        </li>
                                        <li><a href="../11-Official%20Packages/02-Dusk.html">Dusk</a></li>
                                        <li><a href="../11-Official%20Packages/03-Envoy.html">Envoy</a></li>
                                        <li><a href="../11-Official%20Packages/04-Horizon.html">Horizon</a></li>
                                        <li><a href="../11-Official%20Packages/05-Passport.html">Passport</a></li>
                                        <li><a href="../11-Official%20Packages/06-Sanctum.html">Sanctum</a></li>
                                        <li><a href="../11-Official%20Packages/07-Scout.html">Scout</a></li>
                                        <li><a href="../11-Official%20Packages/08-Socialite.html">Socialite</a></li>
                                        <li><a href="../11-Official%20Packages/09-Telescope.html">Telescope</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="trigger_contain">
                    <a href="#" class="nav_trigger" aria-label="Menu">
                        <div class="bar"></div>
                    </a>
                </div>
            </aside>

            <section class="body_content">
                <section class="docs_body">
                    <section class="docs_main">
                        <h1>HTTP Client</h1>
                        <ul>
                            <li><a href="#introduction">Introduction</a></li>
                            <li><a href="#making-requests">Making Requests</a>
                                <ul>
                                    <li><a href="#request-data">Request Data</a></li>
                                    <li><a href="#headers">Headers</a></li>
                                    <li><a href="#authentication">Authentication</a></li>
                                    <li><a href="#timeout">Timeout</a></li>
                                    <li><a href="#retries">Retries</a></li>
                                    <li><a href="#error-handling">Error Handling</a></li>
                                    <li><a href="#guzzle-options">Guzzle Options</a></li>
                                </ul>
                            </li>
                            <li><a href="#testing">Testing</a>
                                <ul>
                                    <li><a href="#faking-responses">Faking Responses</a></li>
                                    <li><a href="#inspecting-requests">Inspecting Requests</a></li>
                                </ul>
                            </li>
                        </ul>
                        <p><a name="introduction"></a></p>
                        <h2 id="introduction"><a href="#introduction">Introduction</a></h2>
                        <p>Laravel provides an expressive, minimal API around the <a
                                href="http://docs.guzzlephp.org/en/stable/">Guzzle HTTP client</a>,
                            allowing you to quickly make outgoing HTTP requests to communicate with
                            other web applications. Laravel's wrapper around Guzzle is focused on
                            its most common use cases and a wonderful developer experience.</p>
                        <p>Before getting started, you should ensure that you have installed the
                            Guzzle package as a dependency of your application. By default, Laravel
                            automatically includes this dependency:</p>
                        <pre class=" language-php"><code class=" language-php">composer <span class="token keyword">require</span> guzzlehttp<span
                                class="token operator">/</span>guzzle</code></pre>
                        <p><a name="making-requests"></a></p>
                        <h2 id="making-requests"><a href="#making-requests">Making Requests</a></h2>
                        <p>To make requests, you may use the <code class=" language-php">get</code>, <code
                                class=" language-php">post</code>, <code class=" language-php">put</code>, <code
                                class=" language-php">patch</code>, and <code class=" language-php">delete</code>
                            methods. First, let's examine how to make a basic <code class=" language-php"><span
                                    class="token constant">GET</span></code> request:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">use</span> <span class="token package">Illuminate<span
                                class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span
                                class="token punctuation">\</span>Http</span><span class="token punctuation">;</span>

<span class="token variable">$response</span> <span class="token operator">=</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">get</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'http://test.com'</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>The <code class=" language-php">get</code> method returns an instance of <code
                                class=" language-php">Illuminate\<span class="token package">Http<span
                                class="token punctuation">\</span>Client<span class="token punctuation">\</span>Response</span></code>,
                            which provides a variety of methods that may be used to inspect the response:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">body</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                class="token punctuation">:</span> string<span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">json</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> <span class="token keyword">array</span><span
                                    class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">status</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> int<span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">ok</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> bool<span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">successful</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> bool<span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">serverError</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> bool<span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">clientError</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> bool<span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">header</span><span
                                    class="token punctuation">(</span><span class="token variable">$header</span><span
                                    class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> string<span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">headers</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">:</span> <span class="token keyword">array</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>The <code class=" language-php">Illuminate\<span class="token package">Http<span
                                class="token punctuation">\</span>Client<span class="token punctuation">\</span>Response</span></code>
                            object also implements the PHP <code class=" language-php">ArrayAccess</code> interface,
                            allowing you to access JSON response data directly on the response:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token keyword">return</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">get</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'http://test.com/users/1'</span><span
                                class="token punctuation">)</span><span class="token punctuation">[</span><span
                                class="token single-quoted-string string">'name'</span><span
                                class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="request-data"></a></p>
                        <h3 id="request-data"><a href="#request-data">Request Data</a></h3>
                        <p>Of course, it is common when using <code class=" language-php"><span class="token constant">POST</span></code>,
                            <code class=" language-php"><span class="token constant">PUT</span></code>, and <code
                                    class=" language-php"><span class="token constant">PATCH</span></code>
                            to send additional data with your request. So, these methods accept an
                            array of data as their second argument. By default, data will be sent
                            using the <code class=" language-php">application<span
                                    class="token operator">/</span>json</code> content type:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">post</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'http://test.com/users'</span><span
                                class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Steve'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'role'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Network Administrator'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <h4>Sending Form URL Encoded Requests</h4>
                        <p>If you would like to send data using the <code class=" language-php">application<span
                                class="token operator">/</span>x<span class="token operator">-</span>www<span
                                class="token operator">-</span>form<span
                                class="token operator">-</span>urlencoded</code> content type, you should call the <code
                                class=" language-php">asForm</code> method before making your request:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">asForm</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">post</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'http://test.com/users'</span><span
                                class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Sara'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'role'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Privacy Consultant'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <h4>Multi-Part Requests</h4>
                        <p>If you would like to send files as multi-part requests, you should call the <code
                                class=" language-php">attach</code>
                            method before making your request. This method accepts the name of the
                            file and its contents. Optionally, you may provide a third argument
                            which will be considered the file's filename:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">attach</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'attachment'</span><span class="token punctuation">,</span> <span
                                    class="token function">file_get_contents</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'photo.jpg'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">,</span> <span
                                    class="token single-quoted-string string">'photo.jpg'</span>
<span class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">post</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'http://test.com/attachments'</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>Instead of passing the raw contents of a file, you may also pass a stream resource:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$photo</span> <span class="token operator">=</span> <span
                                class="token function">fopen</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'photo.jpg'</span><span
                                class="token punctuation">,</span> <span
                                class="token single-quoted-string string">'r'</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$response</span> <span class="token operator">=</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">attach</span><span
                                    class="token punctuation">(</span>
    <span class="token single-quoted-string string">'attachment'</span><span class="token punctuation">,</span> <span
                                    class="token variable">$photo</span><span class="token punctuation">,</span> <span
                                    class="token single-quoted-string string">'photo.jpg'</span>
<span class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">post</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'http://test.com/attachments'</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="headers"></a></p>
                        <h3 id="headers"><a href="#headers">Headers</a></h3>
                        <p>Headers may be added to requests using the <code class=" language-php">withHeaders</code>
                            method. This <code class=" language-php">withHeaders</code> method accepts an array of key /
                            value pairs:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">withHeaders</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token single-quoted-string string">'X-First'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'X-Second'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">post</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'http://test.com/users'</span><span
                                    class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Taylor'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="authentication"></a></p>
                        <h3 id="authentication"><a href="#authentication">Authentication</a></h3>
                        <p>You may specify basic and digest authentication credentials using the <code
                                class=" language-php">withBasicAuth</code> and <code class=" language-php">withDigestAuth</code>
                            methods, respectively:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// Basic authentication...</span>
<span class="token variable">$response</span> <span class="token operator">=</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span
                                    class="token function">withBasicAuth</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'taylor@laravel.com'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'secret'</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">post</span><span
                                    class="token punctuation">(</span><span class="token punctuation">.</span><span
                                    class="token punctuation">.</span><span class="token punctuation">.</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Digest authentication...</span>
<span class="token variable">$response</span> <span class="token operator">=</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">withDigestAuth</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'taylor@laravel.com'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'secret'</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">post</span><span
                                    class="token punctuation">(</span><span class="token punctuation">.</span><span
                                    class="token punctuation">.</span><span class="token punctuation">.</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Bearer Tokens</h4>
                        <p>If you would like to quickly add an <code class=" language-php">Authorization</code> bearer
                            token header to the request, you may use the <code class=" language-php">withToken</code>
                            method:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">withToken</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'token'</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">post</span><span class="token punctuation">(</span><span
                                class="token punctuation">.</span><span class="token punctuation">.</span><span
                                class="token punctuation">.</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p><a name="timeout"></a></p>
                        <h3 id="timeout"><a href="#timeout">Timeout</a></h3>
                        <p>The <code class=" language-php">timeout</code> method may be used to specify the maximum
                            number of seconds to wait for a response:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">timeout</span><span class="token punctuation">(</span><span
                                class="token number">3</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">get</span><span class="token punctuation">(</span><span
                                class="token punctuation">.</span><span class="token punctuation">.</span><span
                                class="token punctuation">.</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p>If the given timeout is exceeded, an instance of <code class=" language-php">Illuminate\<span
                                class="token package">Http<span class="token punctuation">\</span>Client<span
                                class="token punctuation">\</span>ConnectionException</span></code> will be thrown.</p>
                        <p><a name="retries"></a></p>
                        <h3 id="retries"><a href="#retries">Retries</a></h3>
                        <p>If you would like HTTP client to automatically retry the request if a client or server error
                            occurs, you may use the <code class=" language-php">retry</code> method. The <code
                                    class=" language-php">retry</code>
                            method accepts two arguments: the number of times the request should be
                            attempted and the number of milliseconds that Laravel should wait in
                            between attempts:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">retry</span><span class="token punctuation">(</span><span
                                class="token number">3</span><span class="token punctuation">,</span> <span
                                class="token number">100</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">post</span><span class="token punctuation">(</span><span
                                class="token punctuation">.</span><span class="token punctuation">.</span><span
                                class="token punctuation">.</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p>If all of the requests fail, an instance of <code class=" language-php">Illuminate\<span
                                class="token package">Http<span class="token punctuation">\</span>Client<span
                                class="token punctuation">\</span>RequestException</span></code> will be thrown.</p>
                        <p><a name="error-handling"></a></p>
                        <h3 id="error-handling"><a href="#error-handling">Error Handling</a></h3>
                        <p>Unlike Guzzle's default behavior, Laravel's HTTP client wrapper does not throw exceptions on
                            client or server errors (<code class=" language-php"><span
                                    class="token number">400</span></code> and <code class=" language-php"><span
                                    class="token number">500</span></code> level responses from servers). You may
                            determine if one of these errors was returned using the <code class=" language-php">successful</code>,
                            <code class=" language-php">clientError</code>, or <code
                                    class=" language-php">serverError</code> methods:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// Determine if the status code was &gt;= 200 and &lt; 300...</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">successful</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token comment">// Determine if the response has a 400 level status code...</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">clientError</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token comment">// Determine if the response has a 500 level status code...</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">serverError</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Throwing Exceptions</h4>
                        <p>If you have a response instance and would like to throw an instance of <code
                                class=" language-php">Illuminate\<span class="token package">Http<span
                                class="token punctuation">\</span>Client<span class="token punctuation">\</span>RequestException</span></code>
                            if the response is a client or server error, you may use the <code
                                    class=" language-php"><span class="token keyword">throw</span></code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">post</span><span class="token punctuation">(</span><span
                                class="token punctuation">.</span><span class="token punctuation">.</span><span
                                class="token punctuation">.</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>

<span class="token comment">// Throw an exception if a client or server error occurred...</span>
<span class="token variable">$response</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token keyword">throw</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token variable">$response</span><span
                                    class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'id'</span><span
                                    class="token punctuation">]</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>The <code class=" language-php">Illuminate\<span class="token package">Http<span
                                class="token punctuation">\</span>Client<span class="token punctuation">\</span>RequestException</span></code>
                            instance has a public <code class=" language-php"><span
                                    class="token variable">$response</span></code> property which will allow you to
                            inspect the returned response.</p>
                        <p>The <code class=" language-php"><span class="token keyword">throw</span></code> method
                            returns the response instance if no error occurred, allowing you to chain other operations
                            onto the <code class=" language-php"><span class="token keyword">throw</span></code> method:
                        </p>
                        <pre class=" language-php"><code class=" language-php"><span class="token keyword">return</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">post</span><span class="token punctuation">(</span><span
                                class="token punctuation">.</span><span class="token punctuation">.</span><span
                                class="token punctuation">.</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token keyword">throw</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">json</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p><a name="guzzle-options"></a></p>
                        <h3 id="guzzle-options"><a href="#guzzle-options">Guzzle Options</a></h3>
                        <p>You may specify additional <a
                                href="http://docs.guzzlephp.org/en/stable/request-options.html">Guzzle request
                            options</a> using the <code class=" language-php">withOptions</code> method. The <code
                                class=" language-php">withOptions</code> method accepts an array of key / value pairs:
                        </p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$response</span> <span class="token operator">=</span> Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">withOptions</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token single-quoted-string string">'debug'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span
                                    class="token boolean constant">true</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'http://test.com/users'</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="testing"></a></p>
                        <h2 id="testing"><a href="#testing">Testing</a></h2>
                        <p>Many Laravel services provide functionality to help you easily and
                            expressively write tests, and Laravel's HTTP wrapper is no exception.
                            The <code class=" language-php">Http</code> facade's <code class=" language-php">fake</code>
                            method allows you to instruct the HTTP client to return stubbed / dummy responses when
                            requests are made.</p>
                        <p><a name="faking-responses"></a></p>
                        <h3 id="faking-responses"><a href="#faking-responses">Faking Responses</a></h3>
                        <p>For example, to instruct the HTTP client to return empty, <code class=" language-php"><span
                                class="token number">200</span></code> status code responses for every request, you may
                            call the <code class=" language-php">fake</code> method with no arguments:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">use</span> <span class="token package">Illuminate<span
                                class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span
                                class="token punctuation">\</span>Http</span><span class="token punctuation">;</span>

Http<span class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">fake</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$response</span> <span class="token operator">=</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">post</span><span
                                    class="token punctuation">(</span><span class="token punctuation">.</span><span
                                    class="token punctuation">.</span><span class="token punctuation">.</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Faking Specific URLs</h4>
                        <p>Alternatively, you may pass an array to the <code class=" language-php">fake</code> method.
                            The array's keys should represent URL patterns that you wish to fake and their associated
                            responses. The <code class=" language-php"><span class="token operator">*</span></code>
                            character may be used as a wildcard character. Any requests made to
                            URLs that have not been faked will actually be executed. You may use the
                            <code class=" language-php">response</code> method to construct stub / fake responses for
                            these endpoints:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token comment">// Stub a JSON response for GitHub endpoints...</span>
    <span class="token single-quoted-string string">'github.com/*'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">response</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span> <span
                                    class="token number">200</span><span class="token punctuation">,</span> <span
                                    class="token punctuation">[</span><span class="token single-quoted-string string">'Headers'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>

    <span class="token comment">// Stub a string response for Google endpoints...</span>
    <span class="token single-quoted-string string">'google.com/*'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">response</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">,</span> <span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'Headers'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>If you would like to specify a fallback URL pattern that will stub all unmatched URLs, you
                            may use a single <code class=" language-php"><span class="token operator">*</span></code>
                            character:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token comment">// Stub a JSON response for GitHub endpoints...</span>
    <span class="token single-quoted-string string">'github.com/*'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">response</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span> <span
                                    class="token number">200</span><span class="token punctuation">,</span> <span
                                    class="token punctuation">[</span><span class="token single-quoted-string string">'Headers'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>

    <span class="token comment">// Stub a string response for all other endpoints...</span>
    <span class="token single-quoted-string string">'*'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">response</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">,</span> <span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'Headers'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <h4>Faking Response Sequences</h4>
                        <p>Sometimes you may need to specify that a single URL should return a
                            series of fake responses in a specific order. You may accomplish this
                            using the <code class=" language-php">Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span>sequence</code> method to build the responses:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token comment">// Stub a series of responses for GitHub endpoints...</span>
    <span class="token single-quoted-string string">'github.com/*'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">sequence</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">push</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'Hello World'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">push</span><span class="token punctuation">(</span><span
                                    class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'bar'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span> <span
                                    class="token number">200</span><span class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">pushStatus</span><span
                                    class="token punctuation">(</span><span class="token number">404</span><span
                                    class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>When all of the responses in a response sequence have been consumed,
                            any further requests will cause the response sequence to throw an
                            exception. If you would like to specify a default response that should
                            be returned when a sequence is empty, you may use the <code
                                    class=" language-php">whenEmpty</code> method:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token comment">// Stub a series of responses for GitHub endpoints...</span>
    <span class="token single-quoted-string string">'github.com/*'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">sequence</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">push</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'Hello World'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">push</span><span class="token punctuation">(</span><span
                                    class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'bar'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span> <span
                                    class="token number">200</span><span class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">whenEmpty</span><span
                                    class="token punctuation">(</span>Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">response</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>If you would like to fake a sequence of responses but do not need to
                            specify a specific URL pattern that should be faked, you may use the <code
                                    class=" language-php">Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span>fakeSequence</code> method:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fakeSequence</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">push</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'Hello World'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whenEmpty</span><span
                                    class="token punctuation">(</span>Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">response</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Fake Callback</h4>
                        <p>If you require more complicated logic to determine what responses to
                            return for certain endpoints, you may pass a callback to the <code class=" language-php">fake</code>
                            method. This callback will receive an instance of <code
                                    class=" language-php">Illuminate\<span class="token package">Http<span
                                    class="token punctuation">\</span>Client<span class="token punctuation">\</span>Request</span></code>
                            and should return a response instance:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token keyword">function</span> <span class="token punctuation">(</span><span
                                class="token variable">$request</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token keyword">return</span> Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">response</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="inspecting-requests"></a></p>
                        <h3 id="inspecting-requests"><a href="#inspecting-requests">Inspecting Requests</a></h3>
                        <p>When faking responses, you may occasionally wish to inspect the
                            requests the client receives in order to make sure your application is
                            sending the correct data or headers. You may accomplish this by calling
                            the <code class=" language-php">Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span>assertSent</code> method after calling <code
                                    class=" language-php">Http<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span>fake</code>.</p>
                        <p>The <code class=" language-php">assertSent</code> method accepts a callback which will be
                            given an <code class=" language-php">Illuminate\<span class="token package">Http<span
                                    class="token punctuation">\</span>Client<span class="token punctuation">\</span>Request</span></code>
                            instance and should return a boolean value indicating if the request
                            matches your expectations. In order for the test to pass, at least one
                            request must have been issued matching the given expectations:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

Http<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withHeaders</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'X-First'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">post</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'http://test.com/users'</span><span
                                    class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Taylor'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'role'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Developer'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Http<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">assertSent</span><span
                                    class="token punctuation">(</span><span class="token keyword">function</span> <span
                                    class="token punctuation">(</span><span class="token variable">$request</span><span
                                    class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$request</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">hasHeader</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'X-First'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'foo'</span><span
                                    class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
           <span class="token variable">$request</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">url</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                    class="token operator">==</span> <span class="token single-quoted-string string">'http://test.com/users'</span> <span
                                    class="token operator">&amp;&amp;</span>
           <span class="token variable">$request</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'name'</span><span
                                    class="token punctuation">]</span> <span class="token operator">==</span> <span
                                    class="token single-quoted-string string">'Taylor'</span> <span
                                    class="token operator">&amp;&amp;</span>
           <span class="token variable">$request</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'role'</span><span
                                    class="token punctuation">]</span> <span class="token operator">==</span> <span
                                    class="token single-quoted-string string">'Developer'</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>If needed, you may assert that a specific request was not sent using the <code
                                class=" language-php">assertNotSent</code> method:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

Http<span class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">post</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'http://test.com/users'</span><span
                                    class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Taylor'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'role'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Developer'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

Http<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">assertNotSent</span><span
                                    class="token punctuation">(</span><span class="token keyword">function</span> <span
                                    class="token punctuation">(</span>Request <span
                                    class="token variable">$request</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$request</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">url</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span> <span class="token operator">===</span> <span
                                    class="token single-quoted-string string">'http://test.com/posts'</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>Or, if you would like to assert that no requests were sent, you may use the <code
                                class=" language-php">assertNothingSent</code> method:</p>
                        <pre class=" language-php"><code class=" language-php">Http<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">fake</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

Http<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">assertNothingSent</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                    </section>
                </section>
            </section>
        </div>
    </div>

</div>

</body>
<script src="../index_files/app.js.download"></script>
</html>