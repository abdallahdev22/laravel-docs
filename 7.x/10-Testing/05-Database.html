<!DOCTYPE html>
<html class="gr__laravel_com" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Database Testing - Laravel - The PHP Framework For Web Artisans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <link rel="canonical" href="https://laravel.com/docs/7.x/database-testing">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://laravel.com/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://laravel.com/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://laravel.com/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://laravel.com/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="https://laravel.com/img/favicon/safari-pinned-tab.svg" color="#ff2d20">
    <link rel="shortcut icon" href="https://laravel.com/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ff2d20">
    <meta name="msapplication-config" content="/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Load fonts -->
    <link rel="stylesheet" href="05-Database_files/ins2wgm.css">

    <!-- Load styles -->
    <link rel="stylesheet" type="text/css" href="05-Database_files/app.css">

    <!-- Load JS -->
    <script src="05-Database_files/jquery.js"></script>

    <script id="_carbonads_projs" type="text/javascript" src="05-Database_files/CKYILK3E.json"></script>
</head>
<body class="language-php" data-gr-c-s-loaded="true">

<div class="sidebar_layout" id="docsScreen">

    <div class="page_contain">
        <div class="contain">
            <aside class="sidebar">
                <a href="../index.html" class="logo">
                    <img class="mark" src="../index_files/logomark.min.svg" alt="Laravel">
                    <img class="type" src="../index_files/logotype.min.svg" alt="Laravel">
                </a>
                <nav>
                    <div class="navigation_contain" style="display: block;">
                        <div class="docs_sidebar">
                            <ul>
                                <li>
                                    <h2>Prologue</h2>
                                    <ul>
                                        <li><a href="../01-Prologue/01-Release%20Notes.html">Release Notes</a></li>
                                        <li><a href="../01-Prologue/02-Upgrade%20Guide.html">Upgrade Guide</a></li>
                                        <li><a href="../01-Prologue/03-Contribution%20Guide.html">Contribution Guide</a>
                                        </li>
                                        <li><a href="https://laravel.com/api/7.x">API Documentation</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Getting Started</h2>
                                    <ul>
                                        <li><a href="../02-Getting%20Started/01-Installation.html">Installation</a></li>
                                        <li><a href="../02-Getting%20Started/02-Configuration.html">Configuration</a>
                                        </li>
                                        <li><a href="../02-Getting%20Started/03-Directory%20Structure.html">Directory
                                            Structure</a>
                                        </li>
                                        <li><a href="../02-Getting%20Started/04-Homestead.html">Homestead</a></li>
                                        <li><a href="../02-Getting%20Started/05-Valet.html">Valet</a></li>
                                        <li><a href="../02-Getting%20Started/06-Deployment.html">Deployment</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Architecture Concepts</h2>
                                    <ul>
                                        <li><a href="../03-Architecture%20Concepts/01-Request%20Lifecycle.html">Request
                                            Lifecycle</a></li>
                                        <li><a href="../03-Architecture%20Concepts/02-Service%20Container.html">Service
                                            Container</a></li>
                                        <li><a href="../03-Architecture%20Concepts/03-Service%20Providers.html">Service
                                            Providers</a></li>
                                        <li><a href="../03-Architecture%20Concepts/04-Facades.html">Facades</a></li>
                                        <li><a href="../03-Architecture%20Concepts/05-Contracts.html">Contracts</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>The Basics</h2>
                                    <ul>
                                        <li><a href="../04-The%20Basics/01-Routing.html">Routing</a></li>
                                        <li><a href="../04-The%20Basics/02-Middleware.html">Middleware</a></li>
                                        <li><a href="../04-The%20Basics/03-CSRF%20Protection.html">CSRF Protection</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/04-Controllers.html">Controllers</a></li>
                                        <li><a href="../04-The%20Basics/05-Requests.html">Requests</a></li>
                                        <li><a href="../04-The%20Basics/06-Responses.html">Responses</a></li>
                                        <li><a href="../04-The%20Basics/07-Views.html">Views</a></li>
                                        <li><a href="../04-The%20Basics/08-URL%20Generation.html">URL Generation</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/09-Session.html">Session</a></li>
                                        <li><a href="../04-The%20Basics/10-Validation.html">Validation</a></li>
                                        <li><a href="../04-The%20Basics/11-Error%20Handling.html">Error Handling</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/12-Logging.html">Logging</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Frontend</h2>
                                    <ul>
                                        <li><a href="../05-Frontend/01-Blade%20Templates.html">Blade Templates</a></li>
                                        <li><a href="../05-Frontend/02-Localization.html">Localization</a></li>
                                        <li><a href="../05-Frontend/03-Frontend%20Scaffolding.html">Frontend
                                            Scaffolding</a></li>
                                        <li><a href="../05-Frontend/04-Compiling%20Assets.html">Compiling Assets</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Security</h2>
                                    <ul>
                                        <li><a href="../06-Security/01-Authentication.html">Authentication</a></li>
                                        <li><a href="../06-Security/02-Authorization.html">Authorization</a></li>
                                        <li><a href="../06-Security/03-Email%20Verification.html">Email Verification</a>
                                        </li>
                                        <li><a href="../06-Security/04-Encryption.html">Encryption</a></li>
                                        <li><a href="../06-Security/05-Hashing.html">Hashing</a></li>
                                        <li><a href="../06-Security/06-Password%20Reset.html">Password Reset</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Digging Deeper</h2>
                                    <ul>
                                        <li><a href="../07-Digging%20Deeper/01-Artisan%20Console.html">Artisan
                                            Console</a></li>
                                        <li><a href="../07-Digging%20Deeper/02-Broadcasting.html">Broadcasting</a></li>
                                        <li><a href="../07-Digging%20Deeper/03-Cache.html">Cache</a></li>
                                        <li><a href="../07-Digging%20Deeper/04-Collections.html">Collections</a></li>
                                        <li><a href="../07-Digging%20Deeper/05-Events.html">Events</a></li>
                                        <li><a href="../07-Digging%20Deeper/06-File%20Storage.html">File Storage</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/07-Helpers.html">Helpers</a></li>
                                        <li><a href="../07-Digging%20Deeper/08-HTTP%20Client.html">HTTP Client</a></li>
                                        <li><a href="../07-Digging%20Deeper/09-Mail.html">Mail</a></li>
                                        <li><a href="../07-Digging%20Deeper/10-Notifications.html">Notifications</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/11-Package%20Development.html">Package
                                            Development</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/12-Queues.html">Queues</a></li>
                                        <li><a href="../07-Digging%20Deeper/13-Task%20Scheduling.html">Task
                                            Scheduling</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Database</h2>
                                    <ul>
                                        <li><a href="../08-Database/01-Getting%20Started.html">Getting Started</a></li>
                                        <li><a href="../08-Database/02-Query%20Builder.html">Query Builder</a></li>
                                        <li><a href="../08-Database/03-Pagination.html">Pagination</a></li>
                                        <li><a href="../08-Database/04-Migrations.html">Migrations</a></li>
                                        <li><a href="../08-Database/05-Seeding.html">Seeding</a></li>
                                        <li><a href="../08-Database/06-Redis.html">Redis</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Eloquent ORM</h2>
                                    <ul>
                                        <li><a href="../09-Eloquent%20ORM/01-Getting%20Started.html">Getting Started</a>
                                        </li>
                                        <li><a href="../09-Eloquent%20ORM/02-Relationships.html">Relationships</a></li>
                                        <li><a href="../09-Eloquent%20ORM/03-Collections.html">Collections</a></li>
                                        <li><a href="../09-Eloquent%20ORM/04-Mutators.html">Mutators</a></li>
                                        <li><a href="../09-Eloquent%20ORM/05-API%20Resources.html">API Resources</a>
                                        </li>
                                        <li><a href="../09-Eloquent%20ORM/06-Serialization.html">Serialization</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Testing</h2>
                                    <ul>
                                        <li><a href="../10-Testing/01-Getting%20Started.html">Getting Started</a></li>
                                        <li><a href="../10-Testing/02-HTTP%20Tests.html">HTTP Tests</a></li>
                                        <li><a href="../10-Testing/03-Console%20Tests.html">Console Tests</a></li>
                                        <li><a href="../10-Testing/04-Browser%20Tests.html">Browser Tests</a></li>
                                        <li><a href="../10-Testing/05-Database.html">Database</a></li>
                                        <li><a href="../10-Testing/06-Mocking.html">Mocking</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Official Packages</h2>
                                    <ul>
                                        <li><a href="../11-Official%20Packages/01-Cashier.html">Cashier (Stripe)</a>
                                        </li>
                                        <li><a href="https://github.com/laravel/cashier-mollie">Cashier (Mollie)</a>
                                        </li>
                                        <li><a href="../11-Official%20Packages/02-Dusk.html">Dusk</a></li>
                                        <li><a href="../11-Official%20Packages/03-Envoy.html">Envoy</a></li>
                                        <li><a href="../11-Official%20Packages/04-Horizon.html">Horizon</a></li>
                                        <li><a href="../11-Official%20Packages/05-Passport.html">Passport</a></li>
                                        <li><a href="../11-Official%20Packages/06-Sanctum.html">Sanctum</a></li>
                                        <li><a href="../11-Official%20Packages/07-Scout.html">Scout</a></li>
                                        <li><a href="../11-Official%20Packages/08-Socialite.html">Socialite</a></li>
                                        <li><a href="../11-Official%20Packages/09-Telescope.html">Telescope</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="trigger_contain">
                    <a href="#" class="nav_trigger" aria-label="Menu">
                        <div class="bar"></div>
                    </a>
                </div>
            </aside>

            <section class="body_content">
                <section class="docs_body">
                    <section class="docs_main">
                        <h1>Database Testing</h1>
                        <ul>
                            <li><a href="#introduction">Introduction</a></li>
                            <li><a href="#generating-factories">Generating Factories</a></li>
                            <li><a href="#resetting-the-database-after-each-test">Resetting The Database After Each
                                Test</a></li>
                            <li><a href="#writing-factories">Writing Factories</a>
                                <ul>
                                    <li><a href="#extending-factories">Extending Factories</a></li>
                                    <li><a href="#factory-states">Factory States</a></li>
                                    <li><a href="#factory-callbacks">Factory Callbacks</a></li>
                                </ul>
                            </li>
                            <li><a href="#using-factories">Using Factories</a>
                                <ul>
                                    <li><a href="#creating-models">Creating Models</a></li>
                                    <li><a href="#persisting-models">Persisting Models</a></li>
                                    <li><a href="#relationships">Relationships</a></li>
                                </ul>
                            </li>
                            <li><a href="#using-seeds">Using Seeds</a></li>
                            <li><a href="#available-assertions">Available Assertions</a></li>
                        </ul>
                        <p><a name="introduction"></a></p>
                        <h2 id="introduction"><a href="#introduction">Introduction</a></h2>
                        <p>Laravel provides a variety of helpful tools to make it easier to test your database driven
                            applications. First, you may use the <code class=" language-php">assertDatabaseHas</code>
                            helper to assert that data exists in the database matching a given set
                            of criteria. For example, if you would like to verify that there is a
                            record in the <code class=" language-php">users</code> table with the <code
                                    class=" language-php">email</code> value of <code class=" language-php">sally@example<span
                                    class="token punctuation">.</span>com</code>, you can do the following:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token keyword">public</span> <span
                                class="token keyword">function</span> <span
                                class="token function">testDatabase</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Make call to application...</span>

    <span class="token variable">$this</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">assertDatabaseHas</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span
                                    class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'sally@example.com'</span><span
                                    class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                        <p>You can also use the <code class=" language-php">assertDatabaseMissing</code> helper to
                            assert that data does not exist in the database.</p>
                        <p>The <code class=" language-php">assertDatabaseHas</code> method and
                            other helpers like it are for convenience. You are free to use any of
                            PHPUnit's built-in assertion methods to supplement your feature tests.</p>
                        <p><a name="generating-factories"></a></p>
                        <h2 id="generating-factories"><a href="#generating-factories">Generating Factories</a></h2>
                        <p>To create a factory, use the <code class=" language-php">make<span class="token punctuation">:</span>factory</code>
                            <a href="https://laravel.com/docs/7.x/artisan">Artisan command</a>:</p>
                        <pre class=" language-php"><code class=" language-php">php artisan make<span
                                class="token punctuation">:</span>factory PostFactory</code></pre>
                        <p>The new factory will be placed in your <code class=" language-php">database<span
                                class="token operator">/</span>factories</code> directory.</p>
                        <p>The <code class=" language-php"><span class="token operator">--</span>model</code>
                            option may be used to indicate the name of the model created by the
                            factory. This option will pre-fill the generated factory file with the
                            given model:</p>
                        <pre class=" language-php"><code class=" language-php">php artisan make<span
                                class="token punctuation">:</span>factory PostFactory <span
                                class="token operator">--</span>model<span
                                class="token operator">=</span>Post</code></pre>
                        <p><a name="resetting-the-database-after-each-test"></a></p>
                        <h2 id="resetting-the-database-after-each-test"><a
                                href="#resetting-the-database-after-each-test">Resetting The Database After Each
                            Test</a></h2>
                        <p>It is often useful to reset your database after each test so that
                            data from a previous test does not interfere with subsequent tests. The <code
                                    class=" language-php">RefreshDatabase</code>
                            trait takes the most optimal approach to migrating your test database
                            depending on if you are using an in-memory database or a traditional
                            database. Use the trait on your test class and everything will be
                            handled for you:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Tests<span class="token punctuation">\</span>Feature</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span
                                    class="token punctuation">\</span>Testing<span class="token punctuation">\</span>RefreshDatabase</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span
                                    class="token punctuation">\</span>Testing<span class="token punctuation">\</span>WithoutMiddleware</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Tests<span class="token punctuation">\</span>TestCase</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">RefreshDatabase</span><span
                                    class="token punctuation">;</span>

    <span class="token comment">/**
     * A basic functional test example.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testBasicExample</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span
                                    class="token variable">$this</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">get</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p><a name="writing-factories"></a></p>
                        <h2 id="writing-factories"><a href="#writing-factories">Writing Factories</a></h2>
                        <p>When testing, you may need to insert a few records into your database
                            before executing your test. Instead of manually specifying the value of
                            each column when you create this test data, Laravel allows you to
                            define a default set of attributes for each of your <a
                                    href="https://laravel.com/docs/7.x/eloquent">Eloquent models</a> using model
                            factories. To get started, take a look at the <code class=" language-php">database<span
                                    class="token operator">/</span>factories<span class="token operator">/</span>UserFactory<span
                                    class="token punctuation">.</span>php</code> file in your application. Out of the
                            box, this file contains one factory definition:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">use</span> <span class="token package">Faker<span
                                class="token punctuation">\</span>Generator</span> <span class="token keyword">as</span> Faker<span
                                class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span
                                    class="token punctuation">\</span>Str</span><span class="token punctuation">;</span>

<span class="token variable">$factory</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">define</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span> <span
                                    class="token keyword">function</span> <span class="token punctuation">(</span>Faker <span
                                    class="token variable">$faker</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token variable">$faker</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">name</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token variable">$faker</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">unique</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token property">safeEmail</span><span
                                    class="token punctuation">,</span>
        <span class="token single-quoted-string string">'email_verified_at'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token function">now</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>
        <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'</span><span
                                    class="token punctuation">,</span> <span class="token comment">// password</span>
        <span class="token single-quoted-string string">'remember_token'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> Str<span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">random</span><span class="token punctuation">(</span><span
                                    class="token number">10</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>Within the Closure, which serves as the factory definition, you may
                            return the default test values of all attributes on the model. The
                            Closure will receive an instance of the <a
                                    href="https://github.com/fzaninotto/Faker">Faker</a> PHP library, which allows you
                            to conveniently generate various kinds of random data for testing.</p>
                        <p>You may also create additional factory files for each model for better organization. For
                            example, you could create <code class=" language-php">UserFactory<span
                                    class="token punctuation">.</span>php</code> and <code class=" language-php">CommentFactory<span
                                    class="token punctuation">.</span>php</code> files within your <code
                                    class=" language-php">database<span class="token operator">/</span>factories</code>
                            directory. All of the files within the <code class=" language-php">factories</code>
                            directory will automatically be loaded by Laravel.</p>
                        <blockquote>
                            <div class="callout">
                                <div class="icon purple"><img src="05-Database_files/lightbulb.svg"></div>
                                <p class="content"> You can set the Faker locale by adding a <code
                                        class=" language-php">faker_locale</code> option to your <code
                                        class=" language-php">config<span class="token operator">/</span>app<span
                                        class="token punctuation">.</span>php</code> configuration file.</p></div>
                        </blockquote>
                        <p><a name="extending-factories"></a></p>
                        <h3 id="extending-factories"><a href="#extending-factories">Extending Factories</a></h3>
                        <p>If you have extended a model, you may wish to extend its factory as
                            well in order to utilize the child model's factory attributes during
                            testing and seeding. To accomplish this, you may call the factory
                            builder's <code class=" language-php">raw</code> method to obtain the raw array of
                            attributes from any given factory:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$factory</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">define</span><span
                                class="token punctuation">(</span>App\<span class="token package">Admin</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">,</span> <span
                                class="token keyword">function</span> <span
                                class="token punctuation">(</span>Faker\<span
                                class="token package">Generator</span> <span class="token variable">$faker</span><span
                                class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">raw</span><span class="token punctuation">(</span><span
                                    class="token punctuation">[</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="factory-states"></a></p>
                        <h3 id="factory-states"><a href="#factory-states">Factory States</a></h3>
                        <p>States allow you to define discrete modifications that can be applied
                            to your model factories in any combination. For example, your <code class=" language-php">User</code>
                            model might have a <code class=" language-php">delinquent</code> state that modifies one of
                            its default attribute values. You may define your state transformations using the <code
                                    class=" language-php">state</code> method. For simple states, you may pass an array
                            of attribute modifications:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$factory</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">state</span><span
                                class="token punctuation">(</span>App\<span class="token package">User</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">,</span> <span
                                class="token single-quoted-string string">'delinquent'</span><span
                                class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'account_status'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'delinquent'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>If your state requires calculation or a <code class=" language-php"><span
                                class="token variable">$faker</span></code> instance, you may use a Closure to calculate
                            the state's attribute modifications:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$factory</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">state</span><span
                                class="token punctuation">(</span>App\<span class="token package">User</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">,</span> <span
                                class="token single-quoted-string string">'address'</span><span
                                class="token punctuation">,</span> <span class="token keyword">function</span> <span
                                class="token punctuation">(</span><span class="token variable">$faker</span><span
                                class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'address'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token variable">$faker</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">address</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="factory-callbacks"></a></p>
                        <h3 id="factory-callbacks"><a href="#factory-callbacks">Factory Callbacks</a></h3>
                        <p>Factory callbacks are registered using the <code class=" language-php">afterMaking</code> and
                            <code class=" language-php">afterCreating</code>
                            methods, and allow you to perform additional tasks after making or
                            creating a model. For example, you may use callbacks to relate
                            additional models to the created model:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$factory</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">afterMaking</span><span
                                class="token punctuation">(</span>App\<span class="token package">User</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">,</span> <span
                                class="token keyword">function</span> <span class="token punctuation">(</span><span
                                class="token variable">$user</span><span class="token punctuation">,</span> <span
                                class="token variable">$faker</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$factory</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">afterCreating</span><span class="token punctuation">(</span>App\<span
                                    class="token package">User</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token keyword">class</span><span
                                    class="token punctuation">,</span> <span class="token keyword">function</span> <span
                                    class="token punctuation">(</span><span class="token variable">$user</span><span
                                    class="token punctuation">,</span> <span class="token variable">$faker</span><span
                                    class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">accounts</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">save</span><span class="token punctuation">(</span><span
                                    class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span
                                    class="token package">Account</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token keyword">class</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">make</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>You may also define callbacks for <a href="#factory-states">factory states</a>:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$factory</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span
                                class="token function">afterMakingState</span><span class="token punctuation">(</span>App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token keyword">class</span><span
                                class="token punctuation">,</span> <span class="token single-quoted-string string">'delinquent'</span><span
                                class="token punctuation">,</span> <span class="token keyword">function</span> <span
                                class="token punctuation">(</span><span class="token variable">$user</span><span
                                class="token punctuation">,</span> <span class="token variable">$faker</span><span
                                class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$factory</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">afterCreatingState</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span> <span
                                    class="token single-quoted-string string">'delinquent'</span><span
                                    class="token punctuation">,</span> <span class="token keyword">function</span> <span
                                    class="token punctuation">(</span><span class="token variable">$user</span><span
                                    class="token punctuation">,</span> <span class="token variable">$faker</span><span
                                    class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="using-factories"></a></p>
                        <h2 id="using-factories"><a href="#using-factories">Using Factories</a></h2>
                        <p><a name="creating-models"></a></p>
                        <h3 id="creating-models"><a href="#creating-models">Creating Models</a></h3>
                        <p>Once you have defined your factories, you may use the global <code class=" language-php">factory</code>
                            function in your feature tests or seed files to generate model
                            instances. So, let's take a look at a few examples of creating models.
                            First, we'll use the <code class=" language-php">make</code> method to create models but not
                            save them to the database:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token keyword">public</span> <span
                                class="token keyword">function</span> <span
                                class="token function">testDatabase</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$user</span> <span class="token operator">=</span> <span
                                    class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">make</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Use model in tests...</span>
<span class="token punctuation">}</span></code></pre>
                        <p>You may also create a Collection of many models or create models of a given type:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// Create three App\User instances...</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span
                                    class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span> <span
                                    class="token number">3</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">make</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Applying States</h4>
                        <p>You may also apply any of your <a href="#factory-states">states</a>
                            to the models. If you would like to apply multiple state transformations
                            to the models, you should specify the name of each state you would like
                            to apply:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$users</span> <span class="token operator">=</span> <span
                                class="token function">factory</span><span class="token punctuation">(</span>App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token keyword">class</span><span
                                class="token punctuation">,</span> <span class="token number">5</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">states</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'delinquent'</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">make</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>

<span class="token variable">$users</span> <span class="token operator">=</span> <span
                                    class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span> <span
                                    class="token number">5</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">states</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'premium'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'delinquent'</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">make</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Overriding Attributes</h4>
                        <p>If you would like to override some of the default values of your models, you may pass an
                            array of values to the <code class=" language-php">make</code>
                            method. Only the specified values will be replaced while the rest of
                            the values remain set to their default values as specified by the
                            factory:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token variable">$user</span> <span
                                class="token operator">=</span> <span class="token function">factory</span><span
                                class="token punctuation">(</span>App\<span class="token package">User</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">make</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Abigail'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <blockquote>
                            <div class="callout">
                                <div class="icon purple"><img src="05-Database_files/lightbulb.svg"></div>
                                <p class="content"><a href="#mass-assignment">Mass
                                    assignment protection</a> is automatically disabled when creating models using
                                    factories.</p></div>
                        </blockquote>
                        <p><a name="persisting-models"></a></p>
                        <h3 id="persisting-models"><a href="#persisting-models">Persisting Models</a></h3>
                        <p>The <code class=" language-php">create</code> method not only creates the model instances but
                            also saves them to the database using Eloquent's <code class=" language-php">save</code>
                            method:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token keyword">public</span> <span
                                class="token keyword">function</span> <span
                                class="token function">testDatabase</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Create a single App\User instance...</span>
    <span class="token variable">$user</span> <span class="token operator">=</span> <span
                                    class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">create</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Create three App\User instances...</span>
    <span class="token variable">$users</span> <span class="token operator">=</span> <span class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span> <span
                                    class="token number">3</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">create</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Use model in tests...</span>
<span class="token punctuation">}</span></code></pre>
                        <p>You may override attributes on the model by passing an array to the <code
                                class=" language-php">create</code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token variable">$user</span> <span
                                class="token operator">=</span> <span class="token function">factory</span><span
                                class="token punctuation">(</span>App\<span class="token package">User</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">create</span><span class="token punctuation">(</span><span
                                class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Abigail'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="relationships"></a></p>
                        <h3 id="relationships"><a href="#relationships">Relationships</a></h3>
                        <p>In this example, we'll attach a relation to some created models. When using the <code
                                class=" language-php">create</code> method to create multiple models, an Eloquent <a
                                href="https://laravel.com/docs/7.x/eloquent-collections">collection instance</a> is
                            returned, allowing you to use any of the convenient functions provided by the collection,
                            such as <code class=" language-php">each</code>:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$users</span> <span class="token operator">=</span> <span
                                class="token function">factory</span><span class="token punctuation">(</span>App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token keyword">class</span><span
                                class="token punctuation">,</span> <span class="token number">3</span><span
                                class="token punctuation">)</span>
           <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
           <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">each</span><span
                                    class="token punctuation">(</span><span class="token keyword">function</span> <span
                                    class="token punctuation">(</span><span class="token variable">$user</span><span
                                    class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">posts</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">save</span><span class="token punctuation">(</span><span
                                    class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">Post</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">make</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>You may use the <code class=" language-php">createMany</code> method to create multiple
                            related models:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token variable">$user</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">posts</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">createMany</span><span
                                class="token punctuation">(</span>
    <span class="token function">factory</span><span class="token punctuation">(</span>App\<span class="token package">Post</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span> <span
                                    class="token number">3</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">make</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">toArray</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <h4>Relations &amp; Attribute Closures</h4>
                        <p>You may also attach relationships to models in your factory definitions. For example, if you
                            would like to create a new <code class=" language-php">User</code> instance when creating a
                            <code class=" language-php">Post</code>, you may do the following:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$factory</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">define</span><span
                                class="token punctuation">(</span>App\<span class="token package">Post</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">,</span> <span
                                class="token keyword">function</span> <span class="token punctuation">(</span><span
                                class="token variable">$faker</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token variable">$faker</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">title</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'content'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token variable">$faker</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">paragraph</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'user_id'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>If the relationship depends on the factory that defines it you may
                            provide a callback which accepts the evaluated attribute array:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$factory</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">define</span><span
                                class="token punctuation">(</span>App\<span class="token package">Post</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">,</span> <span
                                class="token keyword">function</span> <span class="token punctuation">(</span><span
                                class="token variable">$faker</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token variable">$faker</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">title</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'content'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token variable">$faker</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">paragraph</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'user_id'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token punctuation">,</span>
        <span class="token single-quoted-string string">'user_type'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token keyword">function</span> <span
                                    class="token punctuation">(</span><span class="token keyword">array</span> <span
                                    class="token variable">$post</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">{</span>
            <span class="token keyword">return</span> App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">find</span><span class="token punctuation">(</span><span
                                    class="token variable">$post</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'user_id'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">type</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="using-seeds"></a></p>
                        <h2 id="using-seeds"><a href="#using-seeds">Using Seeds</a></h2>
                        <p>If you would like to use <a href="https://laravel.com/docs/7.x/seeding">database seeders</a>
                            to populate your database during a feature test, you may use the <code
                                    class=" language-php">seed</code> method. By default, the <code
                                    class=" language-php">seed</code> method will return the <code
                                    class=" language-php">DatabaseSeeder</code>, which should execute all of your other
                            seeders. Alternatively, you pass a specific seeder class name to the <code
                                    class=" language-php">seed</code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Tests<span class="token punctuation">\</span>Feature</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span
                                    class="token punctuation">\</span>Testing<span class="token punctuation">\</span>RefreshDatabase</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span
                                    class="token punctuation">\</span>Testing<span class="token punctuation">\</span>WithoutMiddleware</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">OrderStatusSeeder</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Tests<span class="token punctuation">\</span>TestCase</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">RefreshDatabase</span><span
                                    class="token punctuation">;</span>

    <span class="token comment">/**
     * Test creating a new order.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testCreatingANewOrder</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Run the DatabaseSeeder...</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">seed</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

        <span class="token comment">// Run a single seeder...</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">seed</span><span
                                    class="token punctuation">(</span>OrderStatusSeeder<span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p><a name="available-assertions"></a></p>
                        <h2 id="available-assertions"><a href="#available-assertions">Available Assertions</a></h2>
                        <p>Laravel provides several database assertions for your <a
                                href="https://phpunit.de/">PHPUnit</a> feature tests:</p>
                        <table>
                            <thead>
                            <tr>
                                <th>Method</th>
                                <th>Description</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td><code class=" language-php"><span class="token variable">$this</span><span
                                        class="token operator">-</span><span class="token operator">&gt;</span><span
                                        class="token function">assertDatabaseHas</span><span
                                        class="token punctuation">(</span><span
                                        class="token variable">$table</span><span class="token punctuation">,</span>
                                    <span class="token keyword">array</span> <span
                                            class="token variable">$data</span><span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">;</span></code></td>
                                <td>Assert that a table in the database contains the given data.</td>
                            </tr>
                            <tr>
                                <td><code class=" language-php"><span class="token variable">$this</span><span
                                        class="token operator">-</span><span class="token operator">&gt;</span><span
                                        class="token function">assertDatabaseMissing</span><span
                                        class="token punctuation">(</span><span
                                        class="token variable">$table</span><span class="token punctuation">,</span>
                                    <span class="token keyword">array</span> <span
                                            class="token variable">$data</span><span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">;</span></code></td>
                                <td>Assert that a table in the database does not contain the given data.</td>
                            </tr>
                            <tr>
                                <td><code class=" language-php"><span class="token variable">$this</span><span
                                        class="token operator">-</span><span class="token operator">&gt;</span><span
                                        class="token function">assertDeleted</span><span
                                        class="token punctuation">(</span><span
                                        class="token variable">$table</span><span class="token punctuation">,</span>
                                    <span class="token keyword">array</span> <span
                                            class="token variable">$data</span><span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">;</span></code></td>
                                <td>Assert that the given record has been deleted.</td>
                            </tr>
                            <tr>
                                <td><code class=" language-php"><span class="token variable">$this</span><span
                                        class="token operator">-</span><span class="token operator">&gt;</span><span
                                        class="token function">assertSoftDeleted</span><span
                                        class="token punctuation">(</span><span
                                        class="token variable">$table</span><span class="token punctuation">,</span>
                                    <span class="token keyword">array</span> <span
                                            class="token variable">$data</span><span
                                            class="token punctuation">)</span><span
                                            class="token punctuation">;</span></code></td>
                                <td>Assert that the given record has been soft deleted.</td>
                            </tr>
                            </tbody>
                        </table>
                        <p>For convenience, you may pass a model to the <code class=" language-php">assertDeleted</code>
                            and <code class=" language-php">assertSoftDeleted</code> helpers to assert the record was
                            deleted or soft deleted, respectively, from the database based on the model's primary key.
                        </p>
                        <p>For example, if you are using a model factory in your test, you may
                            pass this model to one of these helpers to test your application
                            properly deleted the record from the database:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token keyword">public</span> <span
                                class="token keyword">function</span> <span
                                class="token function">testDatabase</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$user</span> <span class="token operator">=</span> <span
                                    class="token function">factory</span><span
                                    class="token punctuation">(</span>App\<span class="token package">User</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">create</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Make call to application...</span>

    <span class="token variable">$this</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">assertDeleted</span><span
                                    class="token punctuation">(</span><span class="token variable">$user</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                    </section>
                </section>
            </section>
        </div>
    </div>

</div>

</body>
<script src="../index_files/app.js.download"></script>
</html>