<!DOCTYPE html>
<html class="gr__laravel_com" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Eloquent: Getting Started - Laravel - The PHP Framework For Web Artisans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <link rel="canonical" href="https://laravel.com/docs/7.x/eloquent">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://laravel.com/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://laravel.com/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://laravel.com/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://laravel.com/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="https://laravel.com/img/favicon/safari-pinned-tab.svg" color="#ff2d20">
    <link rel="shortcut icon" href="https://laravel.com/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ff2d20">
    <meta name="msapplication-config" content="/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- Load fonts -->
    <link rel="stylesheet" href="01-Getting%20Started_files/ins2wgm.css">

    <!-- Load styles -->
    <link rel="stylesheet" type="text/css" href="01-Getting%20Started_files/app.css">

    <!-- Load JS -->
    <script src="01-Getting%20Started_files/jquery.js"></script>

    <script id="_carbonads_projs" type="text/javascript" src="01-Getting%20Started_files/CKYILK3E.json"></script>
</head>
<body class="language-php" data-gr-c-s-loaded="true">

<div class="sidebar_layout" id="docsScreen">

    <div class="page_contain">
        <div class="contain">
            <aside class="sidebar">
                <a href="../index.html" class="logo">
                    <img class="mark" src="../index_files/logomark.min.svg" alt="Laravel">
                    <img class="type" src="../index_files/logotype.min.svg" alt="Laravel">
                </a>
                <nav>
                    <div class="navigation_contain" style="display: block;">
                        <div class="docs_sidebar">
                            <ul>
                                <li>
                                    <h2>Prologue</h2>
                                    <ul>
                                        <li><a href="../01-Prologue/01-Release%20Notes.html">Release Notes</a></li>
                                        <li><a href="../01-Prologue/02-Upgrade%20Guide.html">Upgrade Guide</a></li>
                                        <li><a href="../01-Prologue/03-Contribution%20Guide.html">Contribution Guide</a>
                                        </li>
                                        <li><a href="https://laravel.com/api/7.x">API Documentation</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Getting Started</h2>
                                    <ul>
                                        <li><a href="../02-Getting%20Started/01-Installation.html">Installation</a></li>
                                        <li><a href="../02-Getting%20Started/02-Configuration.html">Configuration</a>
                                        </li>
                                        <li><a href="../02-Getting%20Started/03-Directory%20Structure.html">Directory
                                            Structure</a>
                                        </li>
                                        <li><a href="../02-Getting%20Started/04-Homestead.html">Homestead</a></li>
                                        <li><a href="../02-Getting%20Started/05-Valet.html">Valet</a></li>
                                        <li><a href="../02-Getting%20Started/06-Deployment.html">Deployment</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Architecture Concepts</h2>
                                    <ul>
                                        <li><a href="../03-Architecture%20Concepts/01-Request%20Lifecycle.html">Request
                                            Lifecycle</a></li>
                                        <li><a href="../03-Architecture%20Concepts/02-Service%20Container.html">Service
                                            Container</a></li>
                                        <li><a href="../03-Architecture%20Concepts/03-Service%20Providers.html">Service
                                            Providers</a></li>
                                        <li><a href="../03-Architecture%20Concepts/04-Facades.html">Facades</a></li>
                                        <li><a href="../03-Architecture%20Concepts/05-Contracts.html">Contracts</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>The Basics</h2>
                                    <ul>
                                        <li><a href="../04-The%20Basics/01-Routing.html">Routing</a></li>
                                        <li><a href="../04-The%20Basics/02-Middleware.html">Middleware</a></li>
                                        <li><a href="../04-The%20Basics/03-CSRF%20Protection.html">CSRF Protection</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/04-Controllers.html">Controllers</a></li>
                                        <li><a href="../04-The%20Basics/05-Requests.html">Requests</a></li>
                                        <li><a href="../04-The%20Basics/06-Responses.html">Responses</a></li>
                                        <li><a href="../04-The%20Basics/07-Views.html">Views</a></li>
                                        <li><a href="../04-The%20Basics/08-URL%20Generation.html">URL Generation</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/09-Session.html">Session</a></li>
                                        <li><a href="../04-The%20Basics/10-Validation.html">Validation</a></li>
                                        <li><a href="../04-The%20Basics/11-Error%20Handling.html">Error Handling</a>
                                        </li>
                                        <li><a href="../04-The%20Basics/12-Logging.html">Logging</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Frontend</h2>
                                    <ul>
                                        <li><a href="../05-Frontend/01-Blade%20Templates.html">Blade Templates</a></li>
                                        <li><a href="../05-Frontend/02-Localization.html">Localization</a></li>
                                        <li><a href="../05-Frontend/03-Frontend%20Scaffolding.html">Frontend
                                            Scaffolding</a></li>
                                        <li><a href="../05-Frontend/04-Compiling%20Assets.html">Compiling Assets</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Security</h2>
                                    <ul>
                                        <li><a href="../06-Security/01-Authentication.html">Authentication</a></li>
                                        <li><a href="../06-Security/02-Authorization.html">Authorization</a></li>
                                        <li><a href="../06-Security/03-Email%20Verification.html">Email Verification</a>
                                        </li>
                                        <li><a href="../06-Security/04-Encryption.html">Encryption</a></li>
                                        <li><a href="../06-Security/05-Hashing.html">Hashing</a></li>
                                        <li><a href="../06-Security/06-Password%20Reset.html">Password Reset</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Digging Deeper</h2>
                                    <ul>
                                        <li><a href="../07-Digging%20Deeper/01-Artisan%20Console.html">Artisan
                                            Console</a></li>
                                        <li><a href="../07-Digging%20Deeper/02-Broadcasting.html">Broadcasting</a></li>
                                        <li><a href="../07-Digging%20Deeper/03-Cache.html">Cache</a></li>
                                        <li><a href="../07-Digging%20Deeper/04-Collections.html">Collections</a></li>
                                        <li><a href="../07-Digging%20Deeper/05-Events.html">Events</a></li>
                                        <li><a href="../07-Digging%20Deeper/06-File%20Storage.html">File Storage</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/07-Helpers.html">Helpers</a></li>
                                        <li><a href="../07-Digging%20Deeper/08-HTTP%20Client.html">HTTP Client</a></li>
                                        <li><a href="../07-Digging%20Deeper/09-Mail.html">Mail</a></li>
                                        <li><a href="../07-Digging%20Deeper/10-Notifications.html">Notifications</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/11-Package%20Development.html">Package
                                            Development</a>
                                        </li>
                                        <li><a href="../07-Digging%20Deeper/12-Queues.html">Queues</a></li>
                                        <li><a href="../07-Digging%20Deeper/13-Task%20Scheduling.html">Task
                                            Scheduling</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Database</h2>
                                    <ul>
                                        <li><a href="../08-Database/01-Getting%20Started.html">Getting Started</a></li>
                                        <li><a href="../08-Database/02-Query%20Builder.html">Query Builder</a></li>
                                        <li><a href="../08-Database/03-Pagination.html">Pagination</a></li>
                                        <li><a href="../08-Database/04-Migrations.html">Migrations</a></li>
                                        <li><a href="../08-Database/05-Seeding.html">Seeding</a></li>
                                        <li><a href="../08-Database/06-Redis.html">Redis</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Eloquent ORM</h2>
                                    <ul>
                                        <li><a href="../09-Eloquent%20ORM/01-Getting%20Started.html">Getting Started</a>
                                        </li>
                                        <li><a href="../09-Eloquent%20ORM/02-Relationships.html">Relationships</a></li>
                                        <li><a href="../09-Eloquent%20ORM/03-Collections.html">Collections</a></li>
                                        <li><a href="../09-Eloquent%20ORM/04-Mutators.html">Mutators</a></li>
                                        <li><a href="../09-Eloquent%20ORM/05-API%20Resources.html">API Resources</a>
                                        </li>
                                        <li><a href="../09-Eloquent%20ORM/06-Serialization.html">Serialization</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Testing</h2>
                                    <ul>
                                        <li><a href="../10-Testing/01-Getting%20Started.html">Getting Started</a></li>
                                        <li><a href="../10-Testing/02-HTTP%20Tests.html">HTTP Tests</a></li>
                                        <li><a href="../10-Testing/03-Console%20Tests.html">Console Tests</a></li>
                                        <li><a href="../10-Testing/04-Browser%20Tests.html">Browser Tests</a></li>
                                        <li><a href="../10-Testing/05-Database.html">Database</a></li>
                                        <li><a href="../10-Testing/06-Mocking.html">Mocking</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <h2>Official Packages</h2>
                                    <ul>
                                        <li><a href="../11-Official%20Packages/01-Cashier.html">Cashier (Stripe)</a>
                                        </li>
                                        <li><a href="https://github.com/laravel/cashier-mollie">Cashier (Mollie)</a>
                                        </li>
                                        <li><a href="../11-Official%20Packages/02-Dusk.html">Dusk</a></li>
                                        <li><a href="../11-Official%20Packages/03-Envoy.html">Envoy</a></li>
                                        <li><a href="../11-Official%20Packages/04-Horizon.html">Horizon</a></li>
                                        <li><a href="../11-Official%20Packages/05-Passport.html">Passport</a></li>
                                        <li><a href="../11-Official%20Packages/06-Sanctum.html">Sanctum</a></li>
                                        <li><a href="../11-Official%20Packages/07-Scout.html">Scout</a></li>
                                        <li><a href="../11-Official%20Packages/08-Socialite.html">Socialite</a></li>
                                        <li><a href="../11-Official%20Packages/09-Telescope.html">Telescope</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="trigger_contain">
                    <a href="#" class="nav_trigger" aria-label="Menu">
                        <div class="bar"></div>
                    </a>
                </div>
            </aside>

            <section class="body_content">
                <section class="docs_body">
                    <section class="docs_main">
                        <h1>Eloquent: Getting Started</h1>
                        <ul>
                            <li><a href="#introduction">Introduction</a></li>
                            <li><a href="#defining-models">Defining Models</a>
                                <ul>
                                    <li><a href="#eloquent-model-conventions">Eloquent Model Conventions</a></li>
                                    <li><a href="#default-attribute-values">Default Attribute Values</a></li>
                                </ul>
                            </li>
                            <li><a href="#retrieving-models">Retrieving Models</a>
                                <ul>
                                    <li><a href="#collections">Collections</a></li>
                                    <li><a href="#chunking-results">Chunking Results</a></li>
                                    <li><a href="#advanced-subqueries">Advanced Subqueries</a></li>
                                </ul>
                            </li>
                            <li><a href="#retrieving-single-models">Retrieving Single Models / Aggregates</a>
                                <ul>
                                    <li><a href="#retrieving-aggregates">Retrieving Aggregates</a></li>
                                </ul>
                            </li>
                            <li><a href="#inserting-and-updating-models">Inserting &amp; Updating Models</a>
                                <ul>
                                    <li><a href="#inserts">Inserts</a></li>
                                    <li><a href="#updates">Updates</a></li>
                                    <li><a href="#mass-assignment">Mass Assignment</a></li>
                                    <li><a href="#other-creation-methods">Other Creation Methods</a></li>
                                </ul>
                            </li>
                            <li><a href="#deleting-models">Deleting Models</a>
                                <ul>
                                    <li><a href="#soft-deleting">Soft Deleting</a></li>
                                    <li><a href="#querying-soft-deleted-models">Querying Soft Deleted Models</a></li>
                                </ul>
                            </li>
                            <li><a href="#replicating-models">Replicating Models</a></li>
                            <li><a href="#query-scopes">Query Scopes</a>
                                <ul>
                                    <li><a href="#global-scopes">Global Scopes</a></li>
                                    <li><a href="#local-scopes">Local Scopes</a></li>
                                </ul>
                            </li>
                            <li><a href="#comparing-models">Comparing Models</a></li>
                            <li><a href="#events">Events</a>
                                <ul>
                                    <li><a href="#events-using-closures">Using Closures</a></li>
                                    <li><a href="#observers">Observers</a></li>
                                </ul>
                            </li>
                        </ul>
                        <p><a name="introduction"></a></p>
                        <h2 id="introduction"><a href="#introduction">Introduction</a></h2>
                        <p>The Eloquent ORM included with Laravel provides a beautiful, simple
                            ActiveRecord implementation for working with your database. Each
                            database table has a corresponding "Model" which is used to interact
                            with that table. Models allow you to query for data in your tables, as
                            well as insert new records into the table.</p>
                        <p>Before getting started, be sure to configure a database connection in <code
                                class=" language-php">config<span class="token operator">/</span>database<span
                                class="token punctuation">.</span>php</code>. For more information on configuring your
                            database, check out <a href="#configuration">the
                                documentation</a>.</p>
                        <p><a name="defining-models"></a></p>
                        <h2 id="defining-models"><a href="#defining-models">Defining Models</a></h2>
                        <p>To get started, let's create an Eloquent model. Models typically live in the <code
                                class=" language-php">app</code> directory, but you are free to place them anywhere that
                            can be auto-loaded according to your <code class=" language-php">composer<span
                                    class="token punctuation">.</span>json</code> file. All Eloquent models extend <code
                                    class=" language-php">Illuminate\<span class="token package">Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span></code>
                            class.</p>
                        <p>The easiest way to create a model instance is using the <code class=" language-php">make<span
                                class="token punctuation">:</span>model</code> <a
                                href="https://laravel.com/docs/7.x/artisan">Artisan command</a>:</p>
                        <pre class=" language-php"><code class=" language-php">php artisan make<span
                                class="token punctuation">:</span>model Flight</code></pre>
                        <p>If you would like to generate a <a href="https://laravel.com/docs/7.x/migrations">database
                            migration</a> when you generate the model, you may use the <code class=" language-php"><span
                                class="token operator">--</span>migration</code> or <code class=" language-php"><span
                                class="token operator">-</span>m</code> option:</p>
                        <pre class=" language-php"><code class=" language-php">php artisan make<span
                                class="token punctuation">:</span>model Flight <span class="token operator">--</span>migration

php artisan make<span class="token punctuation">:</span>model Flight <span class="token operator">-</span>m</code></pre>
                        <p><a name="eloquent-model-conventions"></a></p>
                        <h3 id="eloquent-model-conventions"><a href="#eloquent-model-conventions">Eloquent Model
                            Conventions</a></h3>
                        <p>Now, let's look at an example <code class=" language-php">Flight</code> model, which we will
                            use to retrieve and store information from our <code class=" language-php">flights</code>
                            database table:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span></span></code></pre>
                        <h4>Table Names</h4>
                        <p>Note that we did not tell Eloquent which table to use for our <code class=" language-php">Flight</code>
                            model. By convention, the "snake case", plural name of the class will
                            be used as the table name unless another name is explicitly specified.
                            So, in this case, Eloquent will assume the <code class=" language-php">Flight</code> model
                            stores records in the <code class=" language-php">flights</code> table. You may specify a
                            custom table by defining a <code class=" language-php">table</code> property on your model:
                        </p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The table associated with the model.
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$table</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'my_flights'</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <h4>Primary Keys</h4>
                        <p>Eloquent will also assume that each table has a primary key column named <code
                                class=" language-php">id</code>. You may define a protected <code class=" language-php"><span
                                class="token variable">$primaryKey</span></code> property to override this convention:
                        </p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The primary key associated with the table.
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$primaryKey</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'flight_id'</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>In addition, Eloquent assumes that the primary key is an incrementing
                            integer value, which means that by default the primary key will
                            automatically be cast to an <code class=" language-php">int</code>. If you wish to use a
                            non-incrementing or a non-numeric primary key you must set the public <code
                                    class=" language-php"><span class="token variable">$incrementing</span></code>
                            property on your model to <code class=" language-php"><span class="token boolean constant">false</span></code>:
                        </p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Indicates if the IDs are auto-incrementing.
     *
     * @var bool
     */</span>
    <span class="token keyword">public</span> <span class="token variable">$incrementing</span> <span
                                    class="token operator">=</span> <span
                                    class="token boolean constant">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>If your primary key is not an integer, you should set the protected <code
                                class=" language-php"><span class="token variable">$keyType</span></code> property on
                            your model to <code class=" language-php">string</code>:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The "type" of the auto-incrementing ID.
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$keyType</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'string'</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <h4>Timestamps</h4>
                        <p>By default, Eloquent expects <code class=" language-php">created_at</code> and <code
                                class=" language-php">updated_at</code> columns to exist on your tables. If you do not
                            wish to have these columns automatically managed by Eloquent, set the <code
                                    class=" language-php"><span class="token variable">$timestamps</span></code>
                            property on your model to <code class=" language-php"><span class="token boolean constant">false</span></code>:
                        </p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Indicates if the model should be timestamped.
     *
     * @var bool
     */</span>
    <span class="token keyword">public</span> <span class="token variable">$timestamps</span> <span
                                    class="token operator">=</span> <span
                                    class="token boolean constant">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>If you need to customize the format of your timestamps, set the <code
                                class=" language-php"><span class="token variable">$dateFormat</span></code>
                            property on your model. This property determines how date attributes
                            are stored in the database, as well as their format when the model is
                            serialized to an array or JSON:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The storage format of the model's date columns.
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dateFormat</span> <span
                                    class="token operator">=</span> <span
                                    class="token single-quoted-string string">'U'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>If you need to customize the names of the columns used to store the timestamps, you may set
                            the <code class=" language-php"><span class="token constant">CREATED_AT</span></code> and
                            <code class=" language-php"><span class="token constant">UPDATED_AT</span></code> constants
                            in your model:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">CREATED_AT</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'creation_date'</span><span
                                    class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token constant">UPDATED_AT</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'last_update'</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <h4>Database Connection</h4>
                        <p>By default, all Eloquent models will use the default database
                            connection configured for your application. If you would like to specify
                            a different connection for the model, use the <code class=" language-php"><span
                                    class="token variable">$connection</span></code> property:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The connection name for the model.
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$connection</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'connection-name'</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p><a name="default-attribute-values"></a></p>
                        <h3 id="default-attribute-values"><a href="#default-attribute-values">Default Attribute
                            Values</a></h3>
                        <p>If you would like to define the default values for some of your model's attributes, you may
                            define an <code class=" language-php"><span class="token variable">$attributes</span></code>
                            property on your model:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The model's default values for attributes.
     *
     * @var array
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$attributes</span> <span
                                    class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'delayed'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token boolean constant">false</span><span
                                    class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p><a name="retrieving-models"></a></p>
                        <h2 id="retrieving-models"><a href="#retrieving-models">Retrieving Models</a></h2>
                        <p>Once you have created a model and <a
                                href="#writing-migrations">its associated
                            database table</a>, you are ready to start retrieving data from your database. Think of each
                            Eloquent model as a powerful <a href="https://laravel.com/docs/7.x/queries">query
                                builder</a> allowing you to fluently query the database table associated with the model.
                            For example:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token variable">$flights</span> <span class="token operator">=</span> App\<span class="token package">Flight</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">all</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span
                                    class="token variable">$flights</span> <span class="token keyword">as</span> <span
                                    class="token variable">$flight</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$flight</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <h4>Adding Additional Constraints</h4>
                        <p>The Eloquent <code class=" language-php">all</code> method will return all of the results in
                            the model's table. Since each Eloquent model serves as a <a
                                    href="https://laravel.com/docs/7.x/queries">query builder</a>, you may also add
                            constraints to queries, and then use the <code class=" language-php">get</code> method to
                            retrieve the results:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flights</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">where</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'active'</span><span
                                class="token punctuation">,</span> <span class="token number">1</span><span
                                class="token punctuation">)</span>
               <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">orderBy</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'name'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'desc'</span><span
                                    class="token punctuation">)</span>
               <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">take</span><span class="token punctuation">(</span><span
                                    class="token number">10</span><span class="token punctuation">)</span>
               <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <blockquote>
                            <div class="callout">
                                <div class="icon purple"><img src="01-Getting%20Started_files/lightbulb.svg"></div>
                                <p class="content"> Since Eloquent models are query builders, you should review all of
                                    the methods available on the <a href="https://laravel.com/docs/7.x/queries">query
                                        builder</a>. You may use any of these methods in your Eloquent queries.</p>
                            </div>
                        </blockquote>
                        <h4>Refreshing Models</h4>
                        <p>You can refresh models using the <code class=" language-php">fresh</code> and <code
                                class=" language-php">refresh</code> methods. The <code
                                class=" language-php">fresh</code> method will re-retrieve the model from the database.
                            The existing model instance will not be affected:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">where</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'number'</span><span
                                class="token punctuation">,</span> <span class="token single-quoted-string string">'FR 900'</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">first</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>

<span class="token variable">$freshFlight</span> <span class="token operator">=</span> <span class="token variable">$flight</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">fresh</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>The <code class=" language-php">refresh</code> method will re-hydrate
                            the existing model using fresh data from the database. In addition, all
                            of its loaded relationships will be refreshed as well:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">where</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'number'</span><span
                                class="token punctuation">,</span> <span class="token single-quoted-string string">'FR 900'</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">first</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>

<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">number</span> <span class="token operator">=</span> <span
                                    class="token single-quoted-string string">'FR 456'</span><span
                                    class="token punctuation">;</span>

<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">refresh</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">number</span><span class="token punctuation">;</span> <span
                                    class="token comment">// "FR 900"</span></code></pre>
                        <p><a name="collections"></a></p>
                        <h3 id="collections"><a href="#collections">Collections</a></h3>
                        <p>For Eloquent methods like <code class=" language-php">all</code> and <code
                                class=" language-php">get</code> which retrieve multiple results, an instance of <code
                                class=" language-php">Illuminate\<span class="token package">Database<span
                                class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Collection</span></code>
                            will be returned. The <code class=" language-php">Collection</code> class provides <a
                                    href="#available-methods">a variety
                                of helpful methods</a> for working with your Eloquent results:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flights</span> <span class="token operator">=</span> <span
                                class="token variable">$flights</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">reject</span><span
                                class="token punctuation">(</span><span class="token keyword">function</span> <span
                                class="token punctuation">(</span><span class="token variable">$flight</span><span
                                class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$flight</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">cancelled</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>You may also loop over the collection like an array:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">foreach</span> <span class="token punctuation">(</span><span
                                class="token variable">$flights</span> <span class="token keyword">as</span> <span
                                class="token variable">$flight</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$flight</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                        <p><a name="chunking-results"></a></p>
                        <h3 id="chunking-results"><a href="#chunking-results">Chunking Results</a></h3>
                        <p>If you need to process thousands of Eloquent records, use the <code class=" language-php">chunk</code>
                            command. The <code class=" language-php">chunk</code> method will retrieve a "chunk" of
                            Eloquent models, feeding them to a given <code class=" language-php">Closure</code> for
                            processing. Using the <code class=" language-php">chunk</code> method will conserve memory
                            when working with large result sets:</p>
                        <pre class=" language-php"><code class=" language-php">Flight<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">chunk</span><span class="token punctuation">(</span><span
                                class="token number">200</span><span class="token punctuation">,</span> <span
                                class="token keyword">function</span> <span class="token punctuation">(</span><span
                                class="token variable">$flights</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$flights</span> <span
                                    class="token keyword">as</span> <span class="token variable">$flight</span><span
                                    class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>The first argument passed to the method is the number of records you
                            wish to receive per "chunk". The Closure passed as the second argument
                            will be called for each chunk that is retrieved from the database. A
                            database query will be executed to retrieve each chunk of records passed
                            to the Closure.</p>
                        <h4>Using Cursors</h4>
                        <p>The <code class=" language-php">cursor</code> method allows you to
                            iterate through your database records using a cursor, which will only
                            execute a single query. When processing large amounts of data, the <code
                                    class=" language-php">cursor</code> method may be used to greatly reduce your memory
                            usage:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">foreach</span> <span class="token punctuation">(</span>Flight<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">where</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'foo'</span><span
                                class="token punctuation">,</span> <span
                                class="token single-quoted-string string">'bar'</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">cursor</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                class="token keyword">as</span> <span class="token variable">$flight</span><span
                                class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span></code></pre>
                        <p>The <code class=" language-php">cursor</code> returns an <code class=" language-php">Illuminate\<span
                                class="token package">Support<span
                                class="token punctuation">\</span>LazyCollection</span></code> instance. <a
                                href="#lazy-collections">Lazy collections</a>
                            allow you to use many of collection methods available on typical
                            Laravel collections while only loading a single model into memory at a
                            time:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$users</span> <span class="token operator">=</span> App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">cursor</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">filter</span><span class="token punctuation">(</span><span
                                class="token keyword">function</span> <span class="token punctuation">(</span><span
                                class="token variable">$user</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$user</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">id</span> <span class="token operator">&gt;</span> <span
                                    class="token number">500</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span
                                    class="token variable">$users</span> <span class="token keyword">as</span> <span
                                    class="token variable">$user</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$user</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">id</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                        <p><a name="advanced-subqueries"></a></p>
                        <h3 id="advanced-subqueries"><a href="#advanced-subqueries">Advanced Subqueries</a></h3>
                        <h4>Subquery Selects</h4>
                        <p>Eloquent also offers advanced subquery support, which allows you to
                            pull information from related tables in a single query. For example,
                            let's imagine that we have a table of flight <code class=" language-php">destinations</code>
                            and a table of <code class=" language-php">flights</code> to destinations. The <code
                                    class=" language-php">flights</code> table contains an <code class=" language-php">arrived_at</code>
                            column which indicates when the flight arrived at the destination.</p>
                        <p>Using the subquery functionality available to the <code class=" language-php">select</code>
                            and <code class=" language-php">addSelect</code> methods, we can select all of the <code
                                    class=" language-php">destinations</code> and the name of the flight that most
                            recently arrived at that destination using a single query:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">use</span> <span class="token package">App<span
                                class="token punctuation">\</span>Destination</span><span
                                class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>Flight</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">return</span> Destination<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">addSelect</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'last_flight'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> Flight<span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">select</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'name'</span><span
                                    class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereColumn</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'destination_id'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'destinations.id'</span><span
                                    class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">orderBy</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'arrived_at'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'desc'</span><span
                                    class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">limit</span><span class="token punctuation">(</span><span
                                    class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Subquery Ordering</h4>
                        <p>In addition, the query builder's <code class=" language-php">orderBy</code>
                            function supports subqueries. We may use this functionality to sort all
                            destinations based on when the last flight arrived at that destination.
                            Again, this may be done while executing a single query against the
                            database:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token keyword">return</span> Destination<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">orderByDesc</span><span class="token punctuation">(</span>
    Flight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">select</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'arrived_at'</span><span
                                    class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereColumn</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'destination_id'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'destinations.id'</span><span
                                    class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'arrived_at'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'desc'</span><span
                                    class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">limit</span><span class="token punctuation">(</span><span
                                    class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">get</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="retrieving-single-models"></a></p>
                        <h2 id="retrieving-single-models"><a href="#retrieving-single-models">Retrieving Single Models /
                            Aggregates</a></h2>
                        <p>In addition to retrieving all of the records for a given table, you may also retrieve single
                            records using <code class=" language-php">find</code>, <code
                                    class=" language-php">first</code>, or <code class=" language-php">firstWhere</code>.
                            Instead of returning a collection of models, these methods return a single model instance:
                        </p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// Retrieve a model by its primary key...</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">find</span><span
                                    class="token punctuation">(</span><span class="token number">1</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve the first model matching the query constraints...</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">where</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'active'</span><span
                                    class="token punctuation">,</span> <span class="token number">1</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">first</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token comment">// Shorthand for retrieving the first model matching the query constraints...</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span
                                    class="token function">firstWhere</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'active'</span><span
                                    class="token punctuation">,</span> <span class="token number">1</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>You may also call the <code class=" language-php">find</code> method with an array of primary
                            keys, which will return a collection of the matching records:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flights</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">find</span><span
                                class="token punctuation">(</span><span class="token punctuation">[</span><span
                                class="token number">1</span><span class="token punctuation">,</span> <span
                                class="token number">2</span><span class="token punctuation">,</span> <span
                                class="token number">3</span><span class="token punctuation">]</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>Sometimes you may wish to retrieve the first result of a query or perform some other action
                            if no results are found. The <code class=" language-php">firstOr</code>
                            method will return the first result that is found or, if no results are
                            found, execute the given callback. The result of the callback will be
                            considered the result of the <code class=" language-php">firstOr</code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$model</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">where</span><span
                                class="token punctuation">(</span><span
                                class="token single-quoted-string string">'legs'</span><span
                                class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span
                                class="token punctuation">,</span> <span class="token number">100</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">firstOr</span><span
                                class="token punctuation">(</span><span class="token keyword">function</span> <span
                                class="token punctuation">(</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
        <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>The <code class=" language-php">firstOr</code> method also accepts an array of columns to
                            retrieve:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$model</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">where</span><span
                                class="token punctuation">(</span><span
                                class="token single-quoted-string string">'legs'</span><span
                                class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span
                                class="token punctuation">,</span> <span class="token number">100</span><span
                                class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">firstOr</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'id'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'legs'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span> <span
                                    class="token keyword">function</span> <span class="token punctuation">(</span><span
                                    class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// ...</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Not Found Exceptions</h4>
                        <p>Sometimes you may wish to throw an exception if a model is not found. This is particularly
                            useful in routes or controllers. The <code class=" language-php">findOrFail</code> and <code
                                    class=" language-php">firstOrFail</code> methods will retrieve the first result of
                            the query; however, if no result is found, a <code class=" language-php">Illuminate\<span
                                    class="token package">Database<span class="token punctuation">\</span>Eloquent<span
                                    class="token punctuation">\</span>ModelNotFoundException</span></code> will be
                            thrown:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$model</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">findOrFail</span><span
                                class="token punctuation">(</span><span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$model</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">where</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'legs'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span
                                    class="token punctuation">,</span> <span class="token number">100</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">firstOrFail</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>If the exception is not caught, a <code class=" language-php"><span
                                class="token number">404</span></code> HTTP response is automatically sent back to the
                            user. It is not necessary to write explicit checks to return <code
                                    class=" language-php"><span class="token number">404</span></code> responses when
                            using these methods:</p>
                        <pre class=" language-php"><code class=" language-php">Route<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">get</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'/api/flights/{id}'</span><span
                                class="token punctuation">,</span> <span class="token keyword">function</span> <span
                                class="token punctuation">(</span><span class="token variable">$id</span><span
                                class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> App\<span class="token package">Flight</span><span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">findOrFail</span><span
                                    class="token punctuation">(</span><span class="token variable">$id</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="retrieving-aggregates"></a></p>
                        <h3 id="retrieving-aggregates"><a href="#retrieving-aggregates">Retrieving Aggregates</a></h3>
                        <p>You may also use the <code class=" language-php">count</code>, <code class=" language-php">sum</code>,
                            <code class=" language-php">max</code>, and other <a
                                    href="#aggregates">aggregate methods</a>
                            provided by the <a href="https://laravel.com/docs/7.x/queries">query builder</a>. These
                            methods return the appropriate scalar value instead of a full model instance:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$count</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">where</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'active'</span><span
                                class="token punctuation">,</span> <span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">count</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>

<span class="token variable">$max</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">where</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'active'</span><span
                                    class="token punctuation">,</span> <span class="token number">1</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">max</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'price'</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="inserting-and-updating-models"></a></p>
                        <h2 id="inserting-and-updating-models"><a href="#inserting-and-updating-models">Inserting &amp;
                            Updating Models</a></h2>
                        <p><a name="inserts"></a></p>
                        <h3 id="inserts"><a href="#inserts">Inserts</a></h3>
                        <p>To create a new record in the database, create a new model instance, set attributes on the
                            model, then call the <code class=" language-php">save</code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span
                                    class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span
                                    class="token punctuation">\</span>Controllers<span
                                    class="token punctuation">\</span>Controller</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>Flight</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span
                                    class="token punctuation">\</span>Request</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">FlightController</span> <span
                                    class="token keyword">extends</span> <span
                                    class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Create a new flight instance.
     *
     * @param  Request  $request
     * @return Response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span
                                    class="token punctuation">(</span>Request <span
                                    class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Validate the request...</span>

        <span class="token variable">$flight</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span
                                    class="token class-name">Flight</span><span class="token punctuation">;</span>

        <span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">name</span> <span class="token operator">=</span> <span
                                    class="token variable">$request</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token property">name</span><span
                                    class="token punctuation">;</span>

        <span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">save</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>In this example, we assign the <code class=" language-php">name</code> parameter from the
                            incoming HTTP request to the <code class=" language-php">name</code> attribute of the <code
                                    class=" language-php">App\<span class="token package">Flight</span></code> model
                            instance. When we call the <code class=" language-php">save</code> method, a record will be
                            inserted into the database. The <code class=" language-php">created_at</code> and <code
                                    class=" language-php">updated_at</code> timestamps will automatically be set when
                            the <code class=" language-php">save</code> method is called, so there is no need to set
                            them manually.</p>
                        <p><a name="updates"></a></p>
                        <h3 id="updates"><a href="#updates">Updates</a></h3>
                        <p>The <code class=" language-php">save</code> method may also be used
                            to update models that already exist in the database. To update a model,
                            you should retrieve it, set any attributes you wish to update, and then
                            call the <code class=" language-php">save</code> method. Again, the <code
                                    class=" language-php">updated_at</code> timestamp will automatically be updated, so
                            there is no need to manually set its value:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">find</span><span
                                class="token punctuation">(</span><span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token property">name</span> <span class="token operator">=</span> <span
                                    class="token single-quoted-string string">'New Flight Name'</span><span
                                    class="token punctuation">;</span>

<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">save</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Mass Updates</h4>
                        <p>Updates can also be performed against any number of models that match a given query. In this
                            example, all flights that are <code class=" language-php">active</code> and have a <code
                                    class=" language-php">destination</code> of <code class=" language-php">San
                                Diego</code> will be marked as delayed:</p>
                        <pre class=" language-php"><code class=" language-php">App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">where</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'active'</span><span
                                class="token punctuation">,</span> <span class="token number">1</span><span
                                class="token punctuation">)</span>
          <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'destination'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'San Diego'</span><span
                                    class="token punctuation">)</span>
          <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'delayed'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token number">1</span><span class="token punctuation">]</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>The <code class=" language-php">update</code> method expects an array of column and value
                            pairs representing the columns that should be updated.</p>
                        <blockquote>
                            <div class="callout">
                                <div class="icon red"><img src="01-Getting%20Started_files/exclamation.svg"></div>
                                <p class="content"> When issuing a mass update via Eloquent, the <code
                                        class=" language-php">saving</code>, <code class=" language-php">saved</code>,
                                    <code class=" language-php">updating</code>, and <code
                                            class=" language-php">updated</code>
                                    model events will not be fired for the updated models. This is because
                                    the models are never actually retrieved when issuing a mass update.</p></div>
                        </blockquote>
                        <h4>Examining Attribute Changes</h4>
                        <p>Eloquent provides the <code class=" language-php">isDirty</code>, <code
                                class=" language-php">isClean</code>, and <code class=" language-php">wasChanged</code>
                            methods to examine the internal state of your model and determine how
                            its attributes have changed from when they were originally loaded.</p>
                        <p>The <code class=" language-php">isDirty</code> method determines if
                            any attributes have been changed since the model was loaded. You may
                            pass a specific attribute name to determine if a particular attribute is
                            dirty. The <code class=" language-php">isClean</code> method is the opposite of <code
                                    class=" language-php">isDirty</code> and also accepts an optional attribute
                            argument:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token variable">$user</span> <span
                                class="token operator">=</span> User<span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">create</span><span
                                class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'first_name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Taylor'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'last_name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Otwell'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Developer'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token property">title</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'Painter'</span><span
                                    class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isDirty</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isDirty</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span> <span
                                    class="token comment">// true</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isDirty</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'first_name'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span> <span
                                    class="token comment">// false</span>

<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isClean</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isClean</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span> <span
                                    class="token comment">// false</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isClean</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'first_name'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span> <span
                                    class="token comment">// true</span>

<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">save</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isDirty</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">isClean</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span> <span class="token comment">// true</span></code></pre>
                        <p>The <code class=" language-php">wasChanged</code> method determines
                            if any attributes were changed when the model was last saved within the
                            current request cycle. You may also pass an attribute name to see if a
                            particular attribute was changed:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token variable">$user</span> <span
                                class="token operator">=</span> User<span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">create</span><span
                                class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'first_name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Taylor'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'last_name'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Otwell'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Developer'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token property">title</span> <span
                                    class="token operator">=</span> <span class="token single-quoted-string string">'Painter'</span><span
                                    class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">save</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">wasChanged</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">wasChanged</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span> <span
                                    class="token comment">// true</span>
<span class="token variable">$user</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">wasChanged</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'first_name'</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span> <span
                                    class="token comment">// false</span></code></pre>
                        <p><a name="mass-assignment"></a></p>
                        <h3 id="mass-assignment"><a href="#mass-assignment">Mass Assignment</a></h3>
                        <p>You may also use the <code class=" language-php">create</code> method
                            to save a new model in a single line. The inserted model instance will
                            be returned to you from the method. However, before doing so, you will
                            need to specify either a <code class=" language-php">fillable</code> or <code
                                    class=" language-php">guarded</code> attribute on the model, as all Eloquent models
                            protect against mass-assignment by default.</p>
                        <p>A mass-assignment vulnerability occurs when a user passes an
                            unexpected HTTP parameter through a request, and that parameter changes a
                            column in your database you did not expect. For example, a malicious
                            user might send an <code class=" language-php">is_admin</code> parameter through an HTTP
                            request, which is then passed into your model's <code class=" language-php">create</code>
                            method, allowing the user to escalate themselves to an administrator.</p>
                        <p>So, to get started, you should define which model attributes you want to make mass
                            assignable. You may do this using the <code class=" language-php"><span
                                    class="token variable">$fillable</span></code> property on the model. For example,
                            let's make the <code class=" language-php">name</code> attribute of our <code
                                    class=" language-php">Flight</code> model mass assignable:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The attributes that are mass assignable.
     *
     * @var array
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span
                                    class="token operator">=</span> <span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'name'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>Once we have made the attributes mass assignable, we can use the <code class=" language-php">create</code>
                            method to insert a new record in the database. The <code class=" language-php">create</code>
                            method returns the saved model instance:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">create</span><span
                                class="token punctuation">(</span><span class="token punctuation">[</span><span
                                class="token single-quoted-string string">'name'</span> <span
                                class="token operator">=</span><span class="token operator">&gt;</span> <span
                                class="token single-quoted-string string">'Flight 10'</span><span
                                class="token punctuation">]</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p>If you already have a model instance, you may use the <code class=" language-php">fill</code>
                            method to populate it with an array of attributes:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">fill</span><span
                                class="token punctuation">(</span><span class="token punctuation">[</span><span
                                class="token single-quoted-string string">'name'</span> <span
                                class="token operator">=</span><span class="token operator">&gt;</span> <span
                                class="token single-quoted-string string">'Flight 22'</span><span
                                class="token punctuation">]</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <h4>Guarding Attributes</h4>
                        <p>While <code class=" language-php"><span class="token variable">$fillable</span></code> serves
                            as a "white list" of attributes that should be mass assignable, you may also choose to use
                            <code class=" language-php"><span class="token variable">$guarded</span></code>. The <code
                                    class=" language-php"><span class="token variable">$guarded</span></code>
                            property should contain an array of attributes that you do not want to
                            be mass assignable. All other attributes not in the array will be mass
                            assignable. So, <code class=" language-php"><span
                                    class="token variable">$guarded</span></code> functions like a "black list".
                            Importantly, you should use either <code class=" language-php"><span class="token variable">$fillable</span></code>
                            or <code class=" language-php"><span class="token variable">$guarded</span></code> - not
                            both. In the example below, all attributes <strong>except for <code class=" language-php">price</code></strong>
                            will be mass assignable:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The attributes that aren't mass assignable.
     *
     * @var array
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$guarded</span> <span
                                    class="token operator">=</span> <span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'price'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>If you would like to make all attributes mass assignable, you may define the <code
                                class=" language-php"><span class="token variable">$guarded</span></code> property as an
                            empty array:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">/**
 * The attributes that aren't mass assignable.
 *
 * @var array
 */</span>
<span class="token keyword">protected</span> <span class="token variable">$guarded</span> <span
                                    class="token operator">=</span> <span class="token punctuation">[</span><span
                                    class="token punctuation">]</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="other-creation-methods"></a></p>
                        <h3 id="other-creation-methods"><a href="#other-creation-methods">Other Creation Methods</a>
                        </h3>
                        <h4><code class=" language-php">firstOrCreate</code>/ <code
                                class=" language-php">firstOrNew</code></h4>
                        <p>There are two other methods you may use to create models by mass assigning attributes: <code
                                class=" language-php">firstOrCreate</code> and <code
                                class=" language-php">firstOrNew</code>. The <code
                                class=" language-php">firstOrCreate</code>
                            method will attempt to locate a database record using the given column /
                            value pairs. If the model can not be found in the database, a record
                            will be inserted with the attributes from the first parameter, along
                            with those in the optional second parameter.</p>
                        <p>The <code class=" language-php">firstOrNew</code> method, like <code class=" language-php">firstOrCreate</code>
                            will attempt to locate a record in the database matching the given
                            attributes. However, if a model is not found, a new model instance will
                            be returned. Note that the model returned by <code class=" language-php">firstOrNew</code>
                            has not yet been persisted to the database. You will need to call <code
                                    class=" language-php">save</code> manually to persist it:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// Retrieve flight by name, or create it if it doesn't exist...</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span
                                    class="token function">firstOrCreate</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'name'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'Flight 10'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token comment">// Retrieve flight by name, or create it with the name, delayed, and arrival_time attributes...</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span
                                    class="token function">firstOrCreate</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'Flight 10'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'delayed'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token number">1</span><span class="token punctuation">,</span> <span
                                    class="token single-quoted-string string">'arrival_time'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'11:30'</span><span
                                    class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve by name, or instantiate...</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span
                                    class="token function">firstOrNew</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token single-quoted-string string">'name'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'Flight 10'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token comment">// Retrieve by name, or instantiate with the name, delayed, and arrival_time attributes...</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span
                                    class="token function">firstOrNew</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'Flight 10'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'delayed'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token number">1</span><span class="token punctuation">,</span> <span
                                    class="token single-quoted-string string">'arrival_time'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'11:30'</span><span
                                    class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <h4><code class=" language-php">updateOrCreate</code></h4>
                        <p>You may also come across situations where you want to update an
                            existing model or create a new model if none exists. Laravel provides an
                            <code class=" language-php">updateOrCreate</code> method to do this in one step. Like the
                            <code class=" language-php">firstOrCreate</code> method, <code class=" language-php">updateOrCreate</code>
                            persists the model, so there's no need to call <code class=" language-php"><span
                                    class="token function">save</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span></code>:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// If there's a flight from Oakland to San Diego, set the price to $99.</span>
<span class="token comment">// If no matching model exists, create one.</span>
<span class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                    class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">updateOrCreate</span><span
                                    class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'departure'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'Oakland'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'destination'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token single-quoted-string string">'San Diego'</span><span
                                    class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token number">99</span><span class="token punctuation">,</span> <span
                                    class="token single-quoted-string string">'discounted'</span> <span
                                    class="token operator">=</span><span class="token operator">&gt;</span> <span
                                    class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p><a name="deleting-models"></a></p>
                        <h2 id="deleting-models"><a href="#deleting-models">Deleting Models</a></h2>
                        <p>To delete a model, call the <code class=" language-php">delete</code> method on a model
                            instance:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">find</span><span
                                class="token punctuation">(</span><span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">delete</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Deleting An Existing Model By Key</h4>
                        <p>In the example above, we are retrieving the model from the database before calling the <code
                                class=" language-php">delete</code> method. However, if you know the primary key of the
                            model, you may delete the model without retrieving it by calling the <code
                                    class=" language-php">destroy</code> method. In addition to a single primary key as
                            its argument, the <code class=" language-php">destroy</code> method will accept multiple
                            primary keys, an array of primary keys, or a <a
                                    href="https://laravel.com/docs/7.x/collections">collection</a> of primary keys:</p>
                        <pre class=" language-php"><code class=" language-php">App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">destroy</span><span
                                class="token punctuation">(</span><span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

App\<span class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">destroy</span><span
                                    class="token punctuation">(</span><span class="token number">1</span><span
                                    class="token punctuation">,</span> <span class="token number">2</span><span
                                    class="token punctuation">,</span> <span class="token number">3</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

App\<span class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">destroy</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token number">1</span><span class="token punctuation">,</span> <span
                                    class="token number">2</span><span class="token punctuation">,</span> <span
                                    class="token number">3</span><span class="token punctuation">]</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

App\<span class="token package">Flight</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">destroy</span><span
                                    class="token punctuation">(</span><span class="token function">collect</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span><span
                                    class="token number">1</span><span class="token punctuation">,</span> <span
                                    class="token number">2</span><span class="token punctuation">,</span> <span
                                    class="token number">3</span><span class="token punctuation">]</span><span
                                    class="token punctuation">)</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Deleting Models By Query</h4>
                        <p>You can also run a delete statement on a set of models. In this
                            example, we will delete all flights that are marked as inactive. Like
                            mass updates, mass deletes will not fire any model events for the models
                            that are deleted:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$deletedRows</span> <span
                                class="token operator">=</span> App\<span class="token package">Flight</span><span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">where</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'active'</span><span
                                class="token punctuation">,</span> <span class="token number">0</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">delete</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <blockquote>
                            <div class="callout">
                                <div class="icon red"><img src="01-Getting%20Started_files/exclamation.svg"></div>
                                <p class="content"> When executing a mass delete statement via Eloquent, the <code
                                        class=" language-php">deleting</code> and <code
                                        class=" language-php">deleted</code>
                                    model events will not be fired for the deleted models. This is because
                                    the models are never actually retrieved when executing the delete
                                    statement.</p></div>
                        </blockquote>
                        <p><a name="soft-deleting"></a></p>
                        <h3 id="soft-deleting"><a href="#soft-deleting">Soft Deleting</a></h3>
                        <p>In addition to actually removing records from your database, Eloquent
                            can also "soft delete" models. When models are soft deleted, they are
                            not actually removed from your database. Instead, a <code
                                    class=" language-php">deleted_at</code> attribute is set on the model and inserted
                            into the database. If a model has a non-null <code class=" language-php">deleted_at</code>
                            value, the model has been soft deleted. To enable soft deletes for a model, use the <code
                                    class=" language-php">Illuminate\<span class="token package">Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>SoftDeletes</span></code>
                            trait on the model:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>SoftDeletes</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span
                                    class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">SoftDeletes</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <blockquote>
                            <div class="callout">
                                <div class="icon purple"><img src="01-Getting%20Started_files/lightbulb.svg"></div>
                                <p class="content"> The <code class=" language-php">SoftDeletes</code> trait will
                                    automatically cast the <code class=" language-php">deleted_at</code> attribute to a
                                    <code class=" language-php">DateTime</code> / <code
                                            class=" language-php">Carbon</code> instance for you.</p></div>
                        </blockquote>
                        <p>You should also add the <code class=" language-php">deleted_at</code> column to your database
                            table. The Laravel <a href="https://laravel.com/docs/7.x/migrations">schema builder</a>
                            contains a helper method to create this column:</p>
                        <pre class=" language-php"><code class=" language-php">Schema<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">table</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'flights'</span><span
                                class="token punctuation">,</span> <span class="token keyword">function</span> <span
                                class="token punctuation">(</span>Blueprint <span
                                class="token variable">$table</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">softDeletes</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>Now, when you call the <code class=" language-php">delete</code> method on the model, the
                            <code class=" language-php">deleted_at</code>
                            column will be set to the current date and time. And, when querying a
                            model that uses soft deletes, the soft deleted models will automatically
                            be excluded from all query results.</p>
                        <p>To determine if a given model instance has been soft deleted, use the <code
                                class=" language-php">trashed</code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">if</span> <span class="token punctuation">(</span><span
                                class="token variable">$flight</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">trashed</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span></code></pre>
                        <p><a name="querying-soft-deleted-models"></a></p>
                        <h3 id="querying-soft-deleted-models"><a href="#querying-soft-deleted-models">Querying Soft
                            Deleted Models</a></h3>
                        <h4>Including Soft Deleted Models</h4>
                        <p>As noted above, soft deleted models will automatically be excluded
                            from query results. However, you may force soft deleted models to appear
                            in a result set using the <code class=" language-php">withTrashed</code> method on the
                            query:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flights</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">withTrashed</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">where</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'account_id'</span><span
                                    class="token punctuation">,</span> <span class="token number">1</span><span
                                    class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>The <code class=" language-php">withTrashed</code> method may also be used on a <a
                                href="https://laravel.com/docs/7.x/eloquent-relationships">relationship</a> query:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">history</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">withTrashed</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">get</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <h4>Retrieving Only Soft Deleted Models</h4>
                        <p>The <code class=" language-php">onlyTrashed</code> method will retrieve <strong>only</strong>
                            soft deleted models:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flights</span> <span class="token operator">=</span> App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">onlyTrashed</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">where</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'airline_id'</span><span
                                    class="token punctuation">,</span> <span class="token number">1</span><span
                                    class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <h4>Restoring Soft Deleted Models</h4>
                        <p>Sometimes you may wish to "un-delete" a soft deleted model. To restore a soft deleted model
                            into an active state, use the <code class=" language-php">restore</code> method on a model
                            instance:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">restore</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p>You may also use the <code class=" language-php">restore</code>
                            method in a query to quickly restore multiple models. Again, like other
                            "mass" operations, this will not fire any model events for the models
                            that are restored:</p>
                        <pre class=" language-php"><code class=" language-php">App\<span
                                class="token package">Flight</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">withTrashed</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">where</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'airline_id'</span><span
                                    class="token punctuation">,</span> <span class="token number">1</span><span
                                    class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">restore</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>Like the <code class=" language-php">withTrashed</code> method, the <code
                                class=" language-php">restore</code> method may also be used on <a
                                href="https://laravel.com/docs/7.x/eloquent-relationships">relationships</a>:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$flight</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">history</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">restore</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <h4>Permanently Deleting Models</h4>
                        <p>Sometimes you may need to truly remove a model from your database. To
                            permanently remove a soft deleted model from the database, use the <code
                                    class=" language-php">forceDelete</code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// Force deleting a single model instance...</span>
<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">forceDelete</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>

<span class="token comment">// Force deleting all related models...</span>
<span class="token variable">$flight</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">history</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span
                                    class="token function">forceDelete</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="replicating-models"></a></p>
                        <h2 id="replicating-models"><a href="#replicating-models">Replicating Models</a></h2>
                        <p>You may create an unsaved copy of a model instance using the <code class=" language-php">replicate</code>
                            method. This is particularly useful when you have model instances that share many of the
                            same attributes:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$shipping</span> <span class="token operator">=</span> App\<span
                                class="token package">Address</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">create</span><span
                                class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'type'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'shipping'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'line_1'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'123 Example Street'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'city'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'Victorville'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'state'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'CA'</span><span
                                    class="token punctuation">,</span>
    <span class="token single-quoted-string string">'postcode'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'90001'</span><span
                                    class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$billing</span> <span class="token operator">=</span> <span class="token variable">$shipping</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">replicate</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">fill</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'type'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> <span class="token single-quoted-string string">'billing'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$billing</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">save</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="query-scopes"></a></p>
                        <h2 id="query-scopes"><a href="#query-scopes">Query Scopes</a></h2>
                        <p><a name="global-scopes"></a></p>
                        <h3 id="global-scopes"><a href="#global-scopes">Global Scopes</a></h3>
                        <p>Global scopes allow you to add constraints to all queries for a given model. Laravel's own <a
                                href="#soft-deleting">soft delete</a>
                            functionality utilizes global scopes to only pull "non-deleted" models
                            from the database. Writing your own global scopes can provide a
                            convenient, easy way to make sure every query for a given model receives
                            certain constraints.</p>
                        <h4>Writing Global Scopes</h4>
                        <p>Writing a global scope is simple. Define a class that implements the <code
                                class=" language-php">Illuminate\<span class="token package">Database<span
                                class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Scope</span></code>
                            interface. This interface requires you to implement one method: <code class=" language-php">apply</code>.
                            The <code class=" language-php">apply</code> method may add <code class=" language-php">where</code>
                            constraints to the query as needed:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Scopes</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Builder</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Scope</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AgeScope</span> <span class="token keyword">implements</span> <span
                                    class="token class-name">Scope</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Apply the scope to a given Eloquent query builder.
     *
     * @param  \Illuminate\Database\Eloquent\Builder  $builder
     * @param  \Illuminate\Database\Eloquent\Model  $model
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">apply</span><span
                                    class="token punctuation">(</span>Builder <span
                                    class="token variable">$builder</span><span class="token punctuation">,</span> Model <span
                                    class="token variable">$model</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$builder</span><span class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">where</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'age'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <blockquote>
                            <div class="callout">
                                <div class="icon purple"><img src="01-Getting%20Started_files/lightbulb.svg"></div>
                                <p class="content"> If your global scope is adding columns to the select clause of the
                                    query, you should use the <code class=" language-php">addSelect</code> method
                                    instead of <code class=" language-php">select</code>. This will prevent the
                                    unintentional replacement of the query's existing select clause.</p></div>
                        </blockquote>
                        <h4>Applying Global Scopes</h4>
                        <p>To assign a global scope to a model, you should override a given model's <code
                                class=" language-php">booted</code> method and use the <code class=" language-php">addGlobalScope</code>
                            method:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>Scopes<span class="token punctuation">\</span>AgeScope</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span
                                    class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The "booted" method of the model.
     *
     * @return void
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span
                                    class="token function">booted</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">static</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">addGlobalScope</span><span
                                    class="token punctuation">(</span><span class="token keyword">new</span> <span
                                    class="token class-name">AgeScope</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>After adding the scope, a query to <code class=" language-php">User<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">all</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span></code> will produce the following SQL:</p>
                        <pre class=" language-php"><code class=" language-php">select <span
                                class="token operator">*</span> from `users` where `age` <span class="token operator">&gt;</span> <span
                                class="token number">200</span></code></pre>
                        <h4>Anonymous Global Scopes</h4>
                        <p>Eloquent also allows you to define global scopes using Closures,
                            which is particularly useful for simple scopes that do not warrant a
                            separate class:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Builder</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span
                                    class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The "booted" method of the model.
     *
     * @return void
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span
                                    class="token function">booted</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">static</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">addGlobalScope</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span
                                    class="token punctuation">,</span> <span class="token keyword">function</span> <span
                                    class="token punctuation">(</span>Builder <span
                                    class="token variable">$builder</span><span class="token punctuation">)</span> <span
                                    class="token punctuation">{</span>
            <span class="token variable">$builder</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">where</span><span
                                    class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span
                                    class="token punctuation">,</span> <span class="token number">200</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <h4>Removing Global Scopes</h4>
                        <p>If you would like to remove a global scope for a given query, you may use the <code
                                class=" language-php">withoutGlobalScope</code> method. The method accepts the class
                            name of the global scope as its only argument:</p>
                        <pre class=" language-php"><code class=" language-php">User<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">withoutGlobalScope</span><span class="token punctuation">(</span>AgeScope<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token keyword">class</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">get</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <p>Or, if you defined the global scope using a Closure:</p>
                        <pre class=" language-php"><code class=" language-php">User<span
                                class="token punctuation">:</span><span class="token punctuation">:</span><span
                                class="token function">withoutGlobalScope</span><span class="token punctuation">(</span><span
                                class="token single-quoted-string string">'age'</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">get</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p>If you would like to remove several or even all of the global scopes, you may use the <code
                                class=" language-php">withoutGlobalScopes</code> method:</p>
                        <pre class=" language-php"><code class=" language-php"><span class="token comment">// Remove all of the global scopes...</span>
User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withoutGlobalScopes</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Remove some of the global scopes...</span>
User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withoutGlobalScopes</span><span
                                    class="token punctuation">(</span><span class="token punctuation">[</span>
    FirstScope<span class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span> SecondScope<span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p><a name="local-scopes"></a></p>
                        <h3 id="local-scopes"><a href="#local-scopes">Local Scopes</a></h3>
                        <p>Local scopes allow you to define common sets of constraints that you
                            may easily re-use throughout your application. For example, you may need
                            to frequently retrieve all users that are considered "popular". To
                            define a scope, prefix an Eloquent model method with <code
                                    class=" language-php">scope</code>.</p>
                        <p>Scopes should always return a query builder instance:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span
                                    class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Scope a query to only include popular users.
     *
     * @param  \Illuminate\Database\Eloquent\Builder  $query
     * @return \Illuminate\Database\Eloquent\Builder
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">scopePopular</span><span
                                    class="token punctuation">(</span><span class="token variable">$query</span><span
                                    class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">where</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'votes'</span><span
                                    class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span
                                    class="token punctuation">,</span> <span class="token number">100</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Scope a query to only include active users.
     *
     * @param  \Illuminate\Database\Eloquent\Builder  $query
     * @return \Illuminate\Database\Eloquent\Builder
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">scopeActive</span><span
                                    class="token punctuation">(</span><span class="token variable">$query</span><span
                                    class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">where</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'active'</span><span
                                    class="token punctuation">,</span> <span class="token number">1</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <h4>Utilizing A Local Scope</h4>
                        <p>Once the scope has been defined, you may call the scope methods when querying the model.
                            However, you should not include the <code class=" language-php">scope</code> prefix when
                            calling the method. You can even chain calls to various scopes, for example:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$users</span> <span class="token operator">=</span> App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">popular</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">active</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">orderBy</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'created_at'</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">get</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p>Combining multiple Eloquent model scopes via an <code class=" language-php"><span
                                class="token keyword">or</span></code> query operator may require the use of Closure
                            callbacks:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$users</span> <span class="token operator">=</span> App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">popular</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">orWhere</span><span class="token punctuation">(</span><span
                                class="token keyword">function</span> <span
                                class="token punctuation">(</span>Builder <span
                                class="token variable">$query</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token variable">$query</span><span class="token operator">-</span><span
                                    class="token operator">&gt;</span><span class="token function">active</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">get</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                        <p>However, since this can be cumbersome, Laravel provides a "higher order" <code
                                class=" language-php">orWhere</code> method that allows you to fluently chain these
                            scopes together without the use of Closures:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$users</span> <span class="token operator">=</span> App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">popular</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token property">orWhere</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">active</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token operator">-</span><span class="token operator">&gt;</span><span
                                class="token function">get</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                        <h4>Dynamic Scopes</h4>
                        <p>Sometimes you may wish to define a scope that accepts parameters. To
                            get started, just add your additional parameters to your scope. Scope
                            parameters should be defined after the <code class=" language-php"><span
                                    class="token variable">$query</span></code> parameter:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span
                                    class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Scope a query to only include users of a given type.
     *
     * @param  \Illuminate\Database\Eloquent\Builder  $query
     * @param  mixed  $type
     * @return \Illuminate\Database\Eloquent\Builder
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">scopeOfType</span><span
                                    class="token punctuation">(</span><span class="token variable">$query</span><span
                                    class="token punctuation">,</span> <span class="token variable">$type</span><span
                                    class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span
                                    class="token operator">-</span><span class="token operator">&gt;</span><span
                                    class="token function">where</span><span class="token punctuation">(</span><span
                                    class="token single-quoted-string string">'type'</span><span
                                    class="token punctuation">,</span> <span class="token variable">$type</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>Now, you may pass the parameters when calling the scope:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token variable">$users</span> <span class="token operator">=</span> App\<span
                                class="token package">User</span><span class="token punctuation">:</span><span
                                class="token punctuation">:</span><span class="token function">ofType</span><span
                                class="token punctuation">(</span><span class="token single-quoted-string string">'admin'</span><span
                                class="token punctuation">)</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">get</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                        <p><a name="comparing-models"></a></p>
                        <h2 id="comparing-models"><a href="#comparing-models">Comparing Models</a></h2>
                        <p>Sometimes you may need to determine if two models are the "same". The <code
                                class=" language-php">is</code> method may be used to quickly verify two models have
                            same primary key, table, and database connection:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token keyword">if</span> <span class="token punctuation">(</span><span
                                class="token variable">$post</span><span class="token operator">-</span><span
                                class="token operator">&gt;</span><span class="token function">is</span><span
                                class="token punctuation">(</span><span class="token variable">$anotherPost</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span> <span
                                class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span></code></pre>
                        <p><a name="events"></a></p>
                        <h2 id="events"><a href="#events">Events</a></h2>
                        <p>Eloquent models fire several events, allowing you to hook into the following points in a
                            model's lifecycle: <code class=" language-php">retrieved</code>, <code
                                    class=" language-php">creating</code>, <code class=" language-php">created</code>,
                            <code class=" language-php">updating</code>, <code class=" language-php">updated</code>,
                            <code class=" language-php">saving</code>, <code class=" language-php">saved</code>, <code
                                    class=" language-php">deleting</code>, <code class=" language-php">deleted</code>,
                            <code class=" language-php">restoring</code>, <code class=" language-php">restored</code>.
                            Events allow you to easily execute code each time a specific model
                            class is saved or updated in the database. Each event receives the
                            instance of the model through its constructor.</p>
                        <p>The <code class=" language-php">retrieved</code> event will fire when an existing model is
                            retrieved from the database. When a new model is saved for the first time, the <code
                                    class=" language-php">creating</code> and <code class=" language-php">created</code>
                            events will fire. If a model already existed in the database and the <code
                                    class=" language-php">save</code> method is called, the <code class=" language-php">updating</code>
                            / <code class=" language-php">updated</code> events will fire. However, in both cases, the
                            <code class=" language-php">saving</code> / <code class=" language-php">saved</code> events
                            will fire.</p>
                        <blockquote>
                            <div class="callout">
                                <div class="icon red"><img src="01-Getting%20Started_files/exclamation.svg"></div>
                                <p class="content"> When issuing a mass update or delete via Eloquent, the <code
                                        class=" language-php">saved</code>, <code class=" language-php">updated</code>,
                                    <code class=" language-php">deleting</code>, and <code
                                            class=" language-php">deleted</code>
                                    model events will not be fired for the affected models. This is because
                                    the models are never actually retrieved when issuing a mass update or
                                    delete.</p></div>
                        </blockquote>
                        <p>To get started, define a <code class=" language-php"><span class="token variable">$dispatchesEvents</span></code>
                            property on your Eloquent model that maps various points of the Eloquent model's lifecycle
                            to your own <a href="https://laravel.com/docs/7.x/events">event classes</a>:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>Events<span class="token punctuation">\</span>UserDeleted</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>Events<span class="token punctuation">\</span>UserSaved</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span
                                    class="token punctuation">\</span>Auth<span
                                    class="token punctuation">\</span>User</span> <span class="token keyword">as</span> Authenticatable<span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span
                                    class="token keyword">extends</span> <span
                                    class="token class-name">Authenticatable</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">Notifiable</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * The event map for the model.
     *
     * @var array
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dispatchesEvents</span> <span
                                    class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'saved'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> UserSaved<span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token keyword">class</span><span
                                    class="token punctuation">,</span>
        <span class="token single-quoted-string string">'deleted'</span> <span class="token operator">=</span><span
                                    class="token operator">&gt;</span> UserDeleted<span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>After defining and mapping your Eloquent events, you may use <a
                                href="#defining-listeners">event listeners</a> to
                            handle the events.</p>
                        <p><a name="events-using-closures"></a></p>
                        <h3 id="events-using-closures"><a href="#events-using-closures">Using Closures</a></h3>
                        <p>Instead of using custom event classes, you may register Closures that
                            execute when various model events are fired. Typically, you should
                            register these Closures in the <code class=" language-php">booted</code> method of your
                            model:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>Scopes<span class="token punctuation">\</span>AgeScope</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span
                                    class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span
                                    class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The "booted" method of the model.
     *
     * @return void
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span
                                    class="token function">booted</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">static</span><span class="token punctuation">:</span><span
                                    class="token punctuation">:</span><span class="token function">created</span><span
                                    class="token punctuation">(</span><span class="token keyword">function</span> <span
                                    class="token punctuation">(</span><span class="token variable">$user</span><span
                                    class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p><a name="observers"></a></p>
                        <h3 id="observers"><a href="#observers">Observers</a></h3>
                        <h4>Defining Observers</h4>
                        <p>If you are listening for many events on a given model, you may use
                            observers to group all of your listeners into a single class. Observers
                            classes have method names which reflect the Eloquent events you wish to
                            listen for. Each of these methods receives the model as their only
                            argument. The <code class=" language-php">make<span class="token punctuation">:</span>observer</code>
                            Artisan command is the easiest way to create a new observer class:</p>
                        <pre class=" language-php"><code class=" language-php">php artisan make<span
                                class="token punctuation">:</span>observer UserObserver <span
                                class="token operator">--</span>model<span
                                class="token operator">=</span>User</code></pre>
                        <p>This command will place the new observer in your <code class=" language-php">App<span
                                class="token operator">/</span>Observers</code> directory. If this directory does not
                            exist, Artisan will create it for you. Your fresh observer will look like the following:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Observers</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>User</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserObserver</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Handle the User "created" event.
     *
     * @param  \App\User  $user
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">created</span><span
                                    class="token punctuation">(</span>User <span
                                    class="token variable">$user</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Handle the User "updated" event.
     *
     * @param  \App\User  $user
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">updated</span><span
                                    class="token punctuation">(</span>User <span
                                    class="token variable">$user</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Handle the User "deleted" event.
     *
     * @param  \App\User  $user
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">deleted</span><span
                                    class="token punctuation">(</span>User <span
                                    class="token variable">$user</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Handle the User "forceDeleted" event.
     *
     * @param  \App\User  $user
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">forceDeleted</span><span
                                    class="token punctuation">(</span>User <span
                                    class="token variable">$user</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                        <p>To register an observer, use the <code class=" language-php">observe</code> method on the
                            model you wish to observe. You may register observers in the <code class=" language-php">boot</code>
                            method of one of your service providers. In this example, we'll register the observer in the
                            <code class=" language-php">AppServiceProvider</code>:</p>
                        <pre class=" language-php"><code class=" language-php"><span
                                class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>Observers<span class="token punctuation">\</span>UserObserver</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span
                                    class="token punctuation">\</span>User</span><span
                                    class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span
                                    class="token punctuation">\</span>ServiceProvider</span><span
                                    class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AppServiceProvider</span> <span
                                    class="token keyword">extends</span> <span
                                    class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Register any application services.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Bootstrap any application services.
     *
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span
                                    class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        User<span class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token function">observe</span><span class="token punctuation">(</span>UserObserver<span
                                    class="token punctuation">:</span><span class="token punctuation">:</span><span
                                    class="token keyword">class</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre>
                    </section>
                </section>
            </section>
        </div>
    </div>

</div>

</body>
<script src="../index_files/app.js.download"></script>
</html>